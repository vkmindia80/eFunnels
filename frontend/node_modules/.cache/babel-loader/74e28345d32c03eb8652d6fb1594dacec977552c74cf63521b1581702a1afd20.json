{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import api from'../api';import{DragDropContext,Droppable,Draggable}from'react-beautiful-dnd';import{PlusIcon,BookOpenIcon,PlayIcon,DocumentTextIcon,QuestionMarkCircleIcon,TrashIcon,PencilIcon,ChevronDownIcon,ChevronUpIcon,Bars3Icon,XMarkIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EnhancedCourseBuilder=_ref=>{let{course,onBack}=_ref;const[modules,setModules]=useState([]);const[loading,setLoading]=useState(true);const[showModuleModal,setShowModuleModal]=useState(false);const[showLessonModal,setShowLessonModal]=useState(false);const[editingModule,setEditingModule]=useState(null);const[editingLesson,setEditingLesson]=useState(null);const[selectedModuleId,setSelectedModuleId]=useState(null);const[expandedModules,setExpandedModules]=useState(new Set());useEffect(()=>{fetchCourseDetails();},[]);const fetchCourseDetails=async()=>{try{var _response$data$module;const response=await api.get(\"/courses/\".concat(course.id));setModules(response.data.modules||[]);// Expand all modules by default\nconst allModuleIds=new Set(((_response$data$module=response.data.modules)===null||_response$data$module===void 0?void 0:_response$data$module.map(m=>m.id))||[]);setExpandedModules(allModuleIds);}catch(error){console.error('Error fetching course details:',error);}finally{setLoading(false);}};const toggleModule=moduleId=>{setExpandedModules(prev=>{const newSet=new Set(prev);if(newSet.has(moduleId)){newSet.delete(moduleId);}else{newSet.add(moduleId);}return newSet;});};const handleDragEnd=async result=>{if(!result.destination)return;const{source,destination,type}=result;if(type==='module'){// Reorder modules\nconst newModules=Array.from(modules);const[removed]=newModules.splice(source.index,1);newModules.splice(destination.index,0,removed);// Update order property\nconst updatedModules=newModules.map((mod,idx)=>_objectSpread(_objectSpread({},mod),{},{order:idx}));setModules(updatedModules);// Update on backend\ntry{await Promise.all(updatedModules.map(mod=>api.put(\"/courses/\".concat(course.id,\"/modules/\").concat(mod.id),{order:mod.order})));}catch(error){console.error('Error updating module order:',error);fetchCourseDetails();// Revert on error\n}}else if(type==='lesson'){// Reorder lessons within a module\nconst moduleId=source.droppableId;const moduleIndex=modules.findIndex(m=>m.id===moduleId);const module=modules[moduleIndex];const newLessons=Array.from(module.lessons||[]);const[removed]=newLessons.splice(source.index,1);newLessons.splice(destination.index,0,removed);// Update order property\nconst updatedLessons=newLessons.map((lesson,idx)=>_objectSpread(_objectSpread({},lesson),{},{order:idx}));const newModules=[...modules];newModules[moduleIndex]=_objectSpread(_objectSpread({},module),{},{lessons:updatedLessons});setModules(newModules);// Update on backend\ntry{await Promise.all(updatedLessons.map(lesson=>api.put(\"/courses/\".concat(course.id,\"/modules/\").concat(moduleId,\"/lessons/\").concat(lesson.id),{order:lesson.order})));}catch(error){console.error('Error updating lesson order:',error);fetchCourseDetails();// Revert on error\n}}};const saveModule=async moduleData=>{try{if(editingModule){await api.put(\"/courses/\".concat(course.id,\"/modules/\").concat(editingModule.id),moduleData);}else{await api.post(\"/courses/\".concat(course.id,\"/modules\"),_objectSpread(_objectSpread({},moduleData),{},{order:modules.length}));}fetchCourseDetails();setShowModuleModal(false);setEditingModule(null);}catch(error){console.error('Error saving module:',error);alert('Failed to save module');}};const deleteModule=async moduleId=>{if(!window.confirm('Delete this module and all its lessons?'))return;try{await api.delete(\"/courses/\".concat(course.id,\"/modules/\").concat(moduleId));fetchCourseDetails();}catch(error){console.error('Error deleting module:',error);alert('Failed to delete module');}};const saveLesson=async lessonData=>{try{if(editingLesson){await api.put(\"/courses/\".concat(course.id,\"/modules/\").concat(selectedModuleId,\"/lessons/\").concat(editingLesson.id),lessonData);}else{var _module$lessons;const module=modules.find(m=>m.id===selectedModuleId);await api.post(\"/courses/\".concat(course.id,\"/modules/\").concat(selectedModuleId,\"/lessons\"),_objectSpread(_objectSpread({},lessonData),{},{order:((_module$lessons=module.lessons)===null||_module$lessons===void 0?void 0:_module$lessons.length)||0}));}fetchCourseDetails();setShowLessonModal(false);setEditingLesson(null);setSelectedModuleId(null);}catch(error){console.error('Error saving lesson:',error);alert('Failed to save lesson');}};const deleteLesson=async(moduleId,lessonId)=>{if(!window.confirm('Delete this lesson?'))return;try{await api.delete(\"/courses/\".concat(course.id,\"/modules/\").concat(moduleId,\"/lessons/\").concat(lessonId));fetchCourseDetails();}catch(error){console.error('Error deleting lesson:',error);alert('Failed to delete lesson');}};const openAddLesson=moduleId=>{setSelectedModuleId(moduleId);setEditingLesson(null);setShowLessonModal(true);};const openEditLesson=(moduleId,lesson)=>{setSelectedModuleId(moduleId);setEditingLesson(lesson);setShowLessonModal(true);};const getLessonIcon=contentType=>{switch(contentType){case'video':return PlayIcon;case'text':return DocumentTextIcon;case'pdf':return DocumentTextIcon;case'quiz':return QuestionMarkCircleIcon;default:return BookOpenIcon;}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 p-6\",\"data-testid\":\"enhanced-course-builder\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onBack,className:\"text-blue-600 hover:text-blue-700 flex items-center mb-4\",\"data-testid\":\"back-to-courses-button\",children:\"\\u2190 Back to Courses\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:course.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Build your course content with drag & drop\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-4 mb-6 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[modules.length,\" modules \\u2022 \",modules.reduce((acc,m)=>{var _m$lessons;return acc+(((_m$lessons=m.lessons)===null||_m$lessons===void 0?void 0:_m$lessons.length)||0);},0),\" lessons\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setEditingModule(null);setShowModuleModal(true);},className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center\",\"data-testid\":\"add-module-button\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"w-5 h-5 mr-2\"}),\"Add Module\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow\",children:modules.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BookOpenIcon,{className:\"w-16 h-16 text-gray-300 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No modules yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Add your first module to start building the course\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowModuleModal(true),className:\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700\",children:\"Add First Module\"})]}):/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:handleDragEnd,children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"modules\",type:\"module\",children:provided=>/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},provided.droppableProps),{},{ref:provided.innerRef,className:\"p-6 space-y-4\",children:[modules.map((module,moduleIndex)=>/*#__PURE__*/_jsx(Draggable,{draggableId:module.id,index:moduleIndex,children:(provided,snapshot)=>{var _module$lessons2;return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),{},{className:\"border rounded-lg \".concat(snapshot.isDragging?'shadow-2xl bg-blue-50':'bg-white'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50 border-b flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-1\",children:[/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},provided.dragHandleProps),{},{className:\"mr-3 cursor-move\",children:/*#__PURE__*/_jsx(Bars3Icon,{className:\"w-5 h-5 text-gray-400\"})})),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleModule(module.id),className:\"mr-3\",children:expandedModules.has(module.id)?/*#__PURE__*/_jsx(ChevronUpIcon,{className:\"w-5 h-5 text-gray-600\"}):/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"w-5 h-5 text-gray-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-lg text-gray-900\",children:[\"Module \",moduleIndex+1,\": \",module.title]}),module.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:module.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[((_module$lessons2=module.lessons)===null||_module$lessons2===void 0?void 0:_module$lessons2.length)||0,\" lessons\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openAddLesson(module.id),className:\"px-3 py-1.5 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200\",\"data-testid\":\"add-lesson-\".concat(module.id),children:\"+ Add Lesson\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingModule(module);setShowModuleModal(true);},className:\"p-2 text-gray-600 hover:text-blue-600\",children:/*#__PURE__*/_jsx(PencilIcon,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteModule(module.id),className:\"p-2 text-gray-600 hover:text-red-600\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"w-5 h-5\"})})]})]}),expandedModules.has(module.id)&&/*#__PURE__*/_jsx(Droppable,{droppableId:module.id,type:\"lesson\",children:provided=>/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},provided.droppableProps),{},{ref:provided.innerRef,className:\"p-4 space-y-2\",children:[module.lessons&&module.lessons.length>0?module.lessons.map((lesson,lessonIndex)=>{const LessonIcon=getLessonIcon(lesson.content_type);return/*#__PURE__*/_jsx(Draggable,{draggableId:lesson.id,index:lessonIndex,children:(provided,snapshot)=>/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),{},{className:\"flex items-center justify-between p-3 rounded-lg border \".concat(snapshot.isDragging?'bg-blue-50 shadow-lg':'bg-gray-50 hover:bg-gray-100'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-1\",children:[/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},provided.dragHandleProps),{},{className:\"mr-3 cursor-move\",children:/*#__PURE__*/_jsx(Bars3Icon,{className:\"w-4 h-4 text-gray-400\"})})),/*#__PURE__*/_jsx(LessonIcon,{className:\"w-5 h-5 text-gray-500 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"Lesson \",lessonIndex+1,\": \",lesson.title]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[lesson.content_type,lesson.duration&&\" \\u2022 \".concat(lesson.duration,\" min\")]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditLesson(module.id,lesson),className:\"p-1.5 text-gray-600 hover:text-blue-600\",\"data-testid\":\"edit-lesson-\".concat(lesson.id),children:/*#__PURE__*/_jsx(PencilIcon,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteLesson(module.id,lesson.id),className:\"p-1.5 text-gray-600 hover:text-red-600\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"w-4 h-4\"})})]})]}))},lesson.id);}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-6 text-gray-500 text-sm\",children:\"No lessons yet. Click \\\"Add Lesson\\\" to get started.\"}),provided.placeholder]}))})]}));}},module.id)),provided.placeholder]}))})})}),showModuleModal&&/*#__PURE__*/_jsx(ModuleModal,{module:editingModule,onClose:()=>{setShowModuleModal(false);setEditingModule(null);},onSave:saveModule}),showLessonModal&&/*#__PURE__*/_jsx(LessonModal,{lesson:editingLesson,onClose:()=>{setShowLessonModal(false);setEditingLesson(null);setSelectedModuleId(null);},onSave:saveLesson})]});};// Module Modal Component\nconst ModuleModal=_ref2=>{let{module,onClose,onSave}=_ref2;const[formData,setFormData]=useState({title:(module===null||module===void 0?void 0:module.title)||'',description:(module===null||module===void 0?void 0:module.description)||''});const handleSubmit=e=>{e.preventDefault();onSave(formData);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg max-w-2xl w-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:module?'Edit Module':'Add New Module'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Module Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.title,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{title:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",required:true,placeholder:\"e.g., Introduction to the Course\",\"data-testid\":\"module-title-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{description:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",rows:\"3\",placeholder:\"Brief description of what this module covers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",\"data-testid\":\"save-module-button\",children:module?'Update Module':'Add Module'})]})]})]})})});};// Lesson Modal Component  \nconst LessonModal=_ref3=>{let{lesson,onClose,onSave}=_ref3;const[formData,setFormData]=useState({title:(lesson===null||lesson===void 0?void 0:lesson.title)||'',description:(lesson===null||lesson===void 0?void 0:lesson.description)||'',content_type:(lesson===null||lesson===void 0?void 0:lesson.content_type)||'text',duration:(lesson===null||lesson===void 0?void 0:lesson.duration)||0,content:(lesson===null||lesson===void 0?void 0:lesson.content)||{}});const handleSubmit=e=>{e.preventDefault();onSave(formData);};const renderContentEditor=()=>{switch(formData.content_type){case'video':return/*#__PURE__*/_jsx(VideoEditor,{formData:formData,setFormData:setFormData});case'text':return/*#__PURE__*/_jsx(TextEditor,{formData:formData,setFormData:setFormData});case'pdf':return/*#__PURE__*/_jsx(PDFEditor,{formData:formData,setFormData:setFormData});case'quiz':return/*#__PURE__*/_jsx(QuizEditor,{formData:formData,setFormData:setFormData});default:return null;}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:lesson?'Edit Lesson':'Add New Lesson'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Lesson Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.title,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{title:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",required:true,placeholder:\"e.g., Introduction to Variables\",\"data-testid\":\"lesson-title-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Duration (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.duration,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{duration:parseInt(e.target.value)||0})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",min:\"0\",placeholder:\"e.g., 15\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{description:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",rows:\"2\",placeholder:\"Brief description of the lesson\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Content Type *\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-3\",children:[{value:'video',icon:PlayIcon,label:'Video'},{value:'text',icon:DocumentTextIcon,label:'Text'},{value:'pdf',icon:DocumentTextIcon,label:'PDF'},{value:'quiz',icon:QuestionMarkCircleIcon,label:'Quiz'}].map(_ref4=>{let{value,icon:Icon,label}=_ref4;return/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{content_type:value,content:{}})),className:\"p-4 border-2 rounded-lg flex flex-col items-center justify-center transition-colors \".concat(formData.content_type===value?'border-blue-600 bg-blue-50 text-blue-600':'border-gray-200 hover:border-gray-300'),\"data-testid\":\"content-type-\".concat(value),children:[/*#__PURE__*/_jsx(Icon,{className:\"w-8 h-8 mb-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:label})]},value);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t pt-6\",children:renderContentEditor()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",\"data-testid\":\"save-lesson-button\",children:lesson?'Update Lesson':'Add Lesson'})]})]})]})})});};// Video Editor Component\nconst VideoEditor=_ref5=>{var _formData$content,_formData$content2,_formData$content3;let{formData,setFormData}=_ref5;const[videoSource,setVideoSource]=useState((_formData$content=formData.content)!==null&&_formData$content!==void 0&&_formData$content.file_url?'file':'url');return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:\"Video Configuration\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Video Source\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"url\",checked:videoSource==='url',onChange:e=>setVideoSource(e.target.value),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"YouTube/Vimeo URL\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"file\",checked:videoSource==='file',onChange:e=>setVideoSource(e.target.value),className:\"mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:\"File Upload\"})]})]})]}),videoSource==='url'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Video URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:((_formData$content2=formData.content)===null||_formData$content2===void 0?void 0:_formData$content2.url)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{content:_objectSpread(_objectSpread({},formData.content),{},{url:e.target.value})})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"https://www.youtube.com/embed/...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Use embed URL format for YouTube/Vimeo\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Video File URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:((_formData$content3=formData.content)===null||_formData$content3===void 0?void 0:_formData$content3.file_url)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{content:_objectSpread(_objectSpread({},formData.content),{},{file_url:e.target.value})})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"https://example.com/video.mp4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Direct link to video file (.mp4, .webm, etc.)\"})]})]});};// Text Editor Component\nconst TextEditor=_ref6=>{var _formData$content4;let{formData,setFormData}=_ref6;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:\"Text Content\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Lesson Content\"}),/*#__PURE__*/_jsx(\"textarea\",{value:((_formData$content4=formData.content)===null||_formData$content4===void 0?void 0:_formData$content4.text)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{content:_objectSpread(_objectSpread({},formData.content),{},{text:e.target.value})})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono\",rows:\"12\",placeholder:\"Enter lesson content here. You can use HTML tags for formatting.\",\"data-testid\":\"text-content-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Supports HTML formatting: <h1>, <p>, <strong>, <em>, <ul>, <ol>, <code>, etc.\"})]})]});};// PDF Editor Component\nconst PDFEditor=_ref7=>{var _formData$content5;let{formData,setFormData}=_ref7;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:\"PDF Document\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"PDF URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:((_formData$content5=formData.content)===null||_formData$content5===void 0?void 0:_formData$content5.url)||'',onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{content:_objectSpread(_objectSpread({},formData.content),{},{url:e.target.value})})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"https://example.com/document.pdf\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Direct link to PDF file\"})]})]});};// Quiz Editor Component\nconst QuizEditor=_ref8=>{var _formData$content6;let{formData,setFormData}=_ref8;const[questions,setQuestions]=useState(((_formData$content6=formData.content)===null||_formData$content6===void 0?void 0:_formData$content6.questions)||[]);const addQuestion=()=>{setQuestions([...questions,{question:'',answers:['','','',''],correct_answer:0}]);};const updateQuestion=(index,field,value)=>{const newQuestions=[...questions];newQuestions[index]=_objectSpread(_objectSpread({},newQuestions[index]),{},{[field]:value});setQuestions(newQuestions);setFormData(_objectSpread(_objectSpread({},formData),{},{content:_objectSpread(_objectSpread({},formData.content),{},{questions:newQuestions})}));};const updateAnswer=(qIndex,aIndex,value)=>{const newQuestions=[...questions];newQuestions[qIndex].answers[aIndex]=value;setQuestions(newQuestions);setFormData(_objectSpread(_objectSpread({},formData),{},{content:_objectSpread(_objectSpread({},formData.content),{},{questions:newQuestions})}));};const removeQuestion=index=>{const newQuestions=questions.filter((_,i)=>i!==index);setQuestions(newQuestions);setFormData(_objectSpread(_objectSpread({},formData),{},{content:_objectSpread(_objectSpread({},formData.content),{},{questions:newQuestions})}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:\"Quiz Questions\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addQuestion,className:\"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 text-sm\",\"data-testid\":\"add-quiz-question-button\",children:\"+ Add Question\"})]}),questions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg\",children:[/*#__PURE__*/_jsx(QuestionMarkCircleIcon,{className:\"w-12 h-12 text-gray-300 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No questions yet. Click \\\"Add Question\\\" to get started.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:questions.map((question,qIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-gray-900\",children:[\"Question \",qIndex+1]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeQuestion(qIndex),className:\"text-red-600 hover:text-red-700\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:question.question,onChange:e=>updateQuestion(qIndex,'question',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"Enter your question\",\"data-testid\":\"quiz-question-\".concat(qIndex)}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Answers (select correct one)\"}),question.answers.map((answer,aIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"correct-\".concat(qIndex),checked:question.correct_answer===aIndex,onChange:()=>updateQuestion(qIndex,'correct_answer',aIndex),className:\"flex-shrink-0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:answer,onChange:e=>updateAnswer(qIndex,aIndex,e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"Answer \".concat(aIndex+1),\"data-testid\":\"quiz-answer-\".concat(qIndex,\"-\").concat(aIndex)})]},aIndex))]})]})]},qIndex))})]});};export default EnhancedCourseBuilder;","map":{"version":3,"names":["React","useState","useEffect","api","DragDropContext","Droppable","Draggable","PlusIcon","BookOpenIcon","PlayIcon","DocumentTextIcon","QuestionMarkCircleIcon","TrashIcon","PencilIcon","ChevronDownIcon","ChevronUpIcon","Bars3Icon","XMarkIcon","jsx","_jsx","jsxs","_jsxs","EnhancedCourseBuilder","_ref","course","onBack","modules","setModules","loading","setLoading","showModuleModal","setShowModuleModal","showLessonModal","setShowLessonModal","editingModule","setEditingModule","editingLesson","setEditingLesson","selectedModuleId","setSelectedModuleId","expandedModules","setExpandedModules","Set","fetchCourseDetails","_response$data$module","response","get","concat","id","data","allModuleIds","map","m","error","console","toggleModule","moduleId","prev","newSet","has","delete","add","handleDragEnd","result","destination","source","type","newModules","Array","from","removed","splice","index","updatedModules","mod","idx","_objectSpread","order","Promise","all","put","droppableId","moduleIndex","findIndex","module","newLessons","lessons","updatedLessons","lesson","saveModule","moduleData","post","length","alert","deleteModule","window","confirm","saveLesson","lessonData","_module$lessons","find","deleteLesson","lessonId","openAddLesson","openEditLesson","getLessonIcon","contentType","className","children","onClick","title","reduce","acc","_m$lessons","onDragEnd","provided","droppableProps","ref","innerRef","draggableId","snapshot","_module$lessons2","draggableProps","isDragging","dragHandleProps","description","lessonIndex","LessonIcon","content_type","duration","placeholder","ModuleModal","onClose","onSave","LessonModal","_ref2","formData","setFormData","handleSubmit","e","preventDefault","onSubmit","value","onChange","target","required","rows","_ref3","content","renderContentEditor","VideoEditor","TextEditor","PDFEditor","QuizEditor","parseInt","min","icon","label","_ref4","Icon","_ref5","_formData$content","_formData$content2","_formData$content3","videoSource","setVideoSource","file_url","checked","url","_ref6","_formData$content4","text","_ref7","_formData$content5","_ref8","_formData$content6","questions","setQuestions","addQuestion","question","answers","correct_answer","updateQuestion","field","newQuestions","updateAnswer","qIndex","aIndex","removeQuestion","filter","_","i","answer","name"],"sources":["/app/frontend/src/components/EnhancedCourseBuilder.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../api';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { \n  PlusIcon, \n  BookOpenIcon, \n  PlayIcon, \n  DocumentTextIcon,\n  QuestionMarkCircleIcon,\n  TrashIcon,\n  PencilIcon,\n  ChevronDownIcon,\n  ChevronUpIcon,\n  Bars3Icon,\n  XMarkIcon\n} from '@heroicons/react/24/outline';\n\nconst EnhancedCourseBuilder = ({ course, onBack }) => {\n  const [modules, setModules] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showModuleModal, setShowModuleModal] = useState(false);\n  const [showLessonModal, setShowLessonModal] = useState(false);\n  const [editingModule, setEditingModule] = useState(null);\n  const [editingLesson, setEditingLesson] = useState(null);\n  const [selectedModuleId, setSelectedModuleId] = useState(null);\n  const [expandedModules, setExpandedModules] = useState(new Set());\n\n  useEffect(() => {\n    fetchCourseDetails();\n  }, []);\n\n  const fetchCourseDetails = async () => {\n    try {\n      const response = await api.get(`/courses/${course.id}`);\n      setModules(response.data.modules || []);\n      // Expand all modules by default\n      const allModuleIds = new Set(response.data.modules?.map(m => m.id) || []);\n      setExpandedModules(allModuleIds);\n    } catch (error) {\n      console.error('Error fetching course details:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const toggleModule = (moduleId) => {\n    setExpandedModules(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(moduleId)) {\n        newSet.delete(moduleId);\n      } else {\n        newSet.add(moduleId);\n      }\n      return newSet;\n    });\n  };\n\n  const handleDragEnd = async (result) => {\n    if (!result.destination) return;\n\n    const { source, destination, type } = result;\n\n    if (type === 'module') {\n      // Reorder modules\n      const newModules = Array.from(modules);\n      const [removed] = newModules.splice(source.index, 1);\n      newModules.splice(destination.index, 0, removed);\n      \n      // Update order property\n      const updatedModules = newModules.map((mod, idx) => ({\n        ...mod,\n        order: idx\n      }));\n      \n      setModules(updatedModules);\n      \n      // Update on backend\n      try {\n        await Promise.all(updatedModules.map(mod =>\n          api.put(`/courses/${course.id}/modules/${mod.id}`, { order: mod.order })\n        ));\n      } catch (error) {\n        console.error('Error updating module order:', error);\n        fetchCourseDetails(); // Revert on error\n      }\n    } else if (type === 'lesson') {\n      // Reorder lessons within a module\n      const moduleId = source.droppableId;\n      const moduleIndex = modules.findIndex(m => m.id === moduleId);\n      const module = modules[moduleIndex];\n      \n      const newLessons = Array.from(module.lessons || []);\n      const [removed] = newLessons.splice(source.index, 1);\n      newLessons.splice(destination.index, 0, removed);\n      \n      // Update order property\n      const updatedLessons = newLessons.map((lesson, idx) => ({\n        ...lesson,\n        order: idx\n      }));\n      \n      const newModules = [...modules];\n      newModules[moduleIndex] = { ...module, lessons: updatedLessons };\n      setModules(newModules);\n      \n      // Update on backend\n      try {\n        await Promise.all(updatedLessons.map(lesson =>\n          api.put(`/courses/${course.id}/modules/${moduleId}/lessons/${lesson.id}`, { order: lesson.order })\n        ));\n      } catch (error) {\n        console.error('Error updating lesson order:', error);\n        fetchCourseDetails(); // Revert on error\n      }\n    }\n  };\n\n  const saveModule = async (moduleData) => {\n    try {\n      if (editingModule) {\n        await api.put(`/courses/${course.id}/modules/${editingModule.id}`, moduleData);\n      } else {\n        await api.post(`/courses/${course.id}/modules`, {\n          ...moduleData,\n          order: modules.length\n        });\n      }\n      fetchCourseDetails();\n      setShowModuleModal(false);\n      setEditingModule(null);\n    } catch (error) {\n      console.error('Error saving module:', error);\n      alert('Failed to save module');\n    }\n  };\n\n  const deleteModule = async (moduleId) => {\n    if (!window.confirm('Delete this module and all its lessons?')) return;\n    \n    try {\n      await api.delete(`/courses/${course.id}/modules/${moduleId}`);\n      fetchCourseDetails();\n    } catch (error) {\n      console.error('Error deleting module:', error);\n      alert('Failed to delete module');\n    }\n  };\n\n  const saveLesson = async (lessonData) => {\n    try {\n      if (editingLesson) {\n        await api.put(\n          `/courses/${course.id}/modules/${selectedModuleId}/lessons/${editingLesson.id}`,\n          lessonData\n        );\n      } else {\n        const module = modules.find(m => m.id === selectedModuleId);\n        await api.post(`/courses/${course.id}/modules/${selectedModuleId}/lessons`, {\n          ...lessonData,\n          order: module.lessons?.length || 0\n        });\n      }\n      fetchCourseDetails();\n      setShowLessonModal(false);\n      setEditingLesson(null);\n      setSelectedModuleId(null);\n    } catch (error) {\n      console.error('Error saving lesson:', error);\n      alert('Failed to save lesson');\n    }\n  };\n\n  const deleteLesson = async (moduleId, lessonId) => {\n    if (!window.confirm('Delete this lesson?')) return;\n    \n    try {\n      await api.delete(`/courses/${course.id}/modules/${moduleId}/lessons/${lessonId}`);\n      fetchCourseDetails();\n    } catch (error) {\n      console.error('Error deleting lesson:', error);\n      alert('Failed to delete lesson');\n    }\n  };\n\n  const openAddLesson = (moduleId) => {\n    setSelectedModuleId(moduleId);\n    setEditingLesson(null);\n    setShowLessonModal(true);\n  };\n\n  const openEditLesson = (moduleId, lesson) => {\n    setSelectedModuleId(moduleId);\n    setEditingLesson(lesson);\n    setShowLessonModal(true);\n  };\n\n  const getLessonIcon = (contentType) => {\n    switch (contentType) {\n      case 'video': return PlayIcon;\n      case 'text': return DocumentTextIcon;\n      case 'pdf': return DocumentTextIcon;\n      case 'quiz': return QuestionMarkCircleIcon;\n      default: return BookOpenIcon;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\" data-testid=\"enhanced-course-builder\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <button\n          onClick={onBack}\n          className=\"text-blue-600 hover:text-blue-700 flex items-center mb-4\"\n          data-testid=\"back-to-courses-button\"\n        >\n          ← Back to Courses\n        </button>\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{course.title}</h1>\n        <p className=\"text-gray-600\">Build your course content with drag & drop</p>\n      </div>\n\n      {/* Action Bar */}\n      <div className=\"bg-white rounded-lg shadow p-4 mb-6 flex justify-between items-center\">\n        <div className=\"text-sm text-gray-600\">\n          {modules.length} modules • {modules.reduce((acc, m) => acc + (m.lessons?.length || 0), 0)} lessons\n        </div>\n        <button\n          onClick={() => { setEditingModule(null); setShowModuleModal(true); }}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center\"\n          data-testid=\"add-module-button\"\n        >\n          <PlusIcon className=\"w-5 h-5 mr-2\" />\n          Add Module\n        </button>\n      </div>\n\n      {/* Course Builder */}\n      <div className=\"bg-white rounded-lg shadow\">\n        {modules.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <BookOpenIcon className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No modules yet</h3>\n            <p className=\"text-gray-600 mb-6\">Add your first module to start building the course</p>\n            <button\n              onClick={() => setShowModuleModal(true)}\n              className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700\"\n            >\n              Add First Module\n            </button>\n          </div>\n        ) : (\n          <DragDropContext onDragEnd={handleDragEnd}>\n            <Droppable droppableId=\"modules\" type=\"module\">\n              {(provided) => (\n                <div\n                  {...provided.droppableProps}\n                  ref={provided.innerRef}\n                  className=\"p-6 space-y-4\"\n                >\n                  {modules.map((module, moduleIndex) => (\n                    <Draggable key={module.id} draggableId={module.id} index={moduleIndex}>\n                      {(provided, snapshot) => (\n                        <div\n                          ref={provided.innerRef}\n                          {...provided.draggableProps}\n                          className={`border rounded-lg ${\n                            snapshot.isDragging ? 'shadow-2xl bg-blue-50' : 'bg-white'\n                          }`}\n                        >\n                          {/* Module Header */}\n                          <div className=\"p-4 bg-gray-50 border-b flex items-center justify-between\">\n                            <div className=\"flex items-center flex-1\">\n                              <div {...provided.dragHandleProps} className=\"mr-3 cursor-move\">\n                                <Bars3Icon className=\"w-5 h-5 text-gray-400\" />\n                              </div>\n                              <button\n                                onClick={() => toggleModule(module.id)}\n                                className=\"mr-3\"\n                              >\n                                {expandedModules.has(module.id) ? (\n                                  <ChevronUpIcon className=\"w-5 h-5 text-gray-600\" />\n                                ) : (\n                                  <ChevronDownIcon className=\"w-5 h-5 text-gray-600\" />\n                                )}\n                              </button>\n                              <div className=\"flex-1\">\n                                <h3 className=\"font-semibold text-lg text-gray-900\">\n                                  Module {moduleIndex + 1}: {module.title}\n                                </h3>\n                                {module.description && (\n                                  <p className=\"text-sm text-gray-600 mt-1\">{module.description}</p>\n                                )}\n                                <p className=\"text-xs text-gray-500 mt-1\">\n                                  {module.lessons?.length || 0} lessons\n                                </p>\n                              </div>\n                            </div>\n                            <div className=\"flex items-center space-x-2\">\n                              <button\n                                onClick={() => openAddLesson(module.id)}\n                                className=\"px-3 py-1.5 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200\"\n                                data-testid={`add-lesson-${module.id}`}\n                              >\n                                + Add Lesson\n                              </button>\n                              <button\n                                onClick={() => { setEditingModule(module); setShowModuleModal(true); }}\n                                className=\"p-2 text-gray-600 hover:text-blue-600\"\n                              >\n                                <PencilIcon className=\"w-5 h-5\" />\n                              </button>\n                              <button\n                                onClick={() => deleteModule(module.id)}\n                                className=\"p-2 text-gray-600 hover:text-red-600\"\n                              >\n                                <TrashIcon className=\"w-5 h-5\" />\n                              </button>\n                            </div>\n                          </div>\n\n                          {/* Lessons */}\n                          {expandedModules.has(module.id) && (\n                            <Droppable droppableId={module.id} type=\"lesson\">\n                              {(provided) => (\n                                <div\n                                  {...provided.droppableProps}\n                                  ref={provided.innerRef}\n                                  className=\"p-4 space-y-2\"\n                                >\n                                  {module.lessons && module.lessons.length > 0 ? (\n                                    module.lessons.map((lesson, lessonIndex) => {\n                                      const LessonIcon = getLessonIcon(lesson.content_type);\n                                      return (\n                                        <Draggable\n                                          key={lesson.id}\n                                          draggableId={lesson.id}\n                                          index={lessonIndex}\n                                        >\n                                          {(provided, snapshot) => (\n                                            <div\n                                              ref={provided.innerRef}\n                                              {...provided.draggableProps}\n                                              className={`flex items-center justify-between p-3 rounded-lg border ${\n                                                snapshot.isDragging\n                                                  ? 'bg-blue-50 shadow-lg'\n                                                  : 'bg-gray-50 hover:bg-gray-100'\n                                              }`}\n                                            >\n                                              <div className=\"flex items-center flex-1\">\n                                                <div {...provided.dragHandleProps} className=\"mr-3 cursor-move\">\n                                                  <Bars3Icon className=\"w-4 h-4 text-gray-400\" />\n                                                </div>\n                                                <LessonIcon className=\"w-5 h-5 text-gray-500 mr-3\" />\n                                                <div>\n                                                  <p className=\"font-medium text-gray-900\">\n                                                    Lesson {lessonIndex + 1}: {lesson.title}\n                                                  </p>\n                                                  <p className=\"text-xs text-gray-500\">\n                                                    {lesson.content_type}\n                                                    {lesson.duration && ` • ${lesson.duration} min`}\n                                                  </p>\n                                                </div>\n                                              </div>\n                                              <div className=\"flex items-center space-x-2\">\n                                                <button\n                                                  onClick={() => openEditLesson(module.id, lesson)}\n                                                  className=\"p-1.5 text-gray-600 hover:text-blue-600\"\n                                                  data-testid={`edit-lesson-${lesson.id}`}\n                                                >\n                                                  <PencilIcon className=\"w-4 h-4\" />\n                                                </button>\n                                                <button\n                                                  onClick={() => deleteLesson(module.id, lesson.id)}\n                                                  className=\"p-1.5 text-gray-600 hover:text-red-600\"\n                                                >\n                                                  <TrashIcon className=\"w-4 h-4\" />\n                                                </button>\n                                              </div>\n                                            </div>\n                                          )}\n                                        </Draggable>\n                                      );\n                                    })\n                                  ) : (\n                                    <div className=\"text-center py-6 text-gray-500 text-sm\">\n                                      No lessons yet. Click \"Add Lesson\" to get started.\n                                    </div>\n                                  )}\n                                  {provided.placeholder}\n                                </div>\n                              )}\n                            </Droppable>\n                          )}\n                        </div>\n                      )}\n                    </Draggable>\n                  ))}\n                  {provided.placeholder}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n        )}\n      </div>\n\n      {/* Module Modal */}\n      {showModuleModal && (\n        <ModuleModal\n          module={editingModule}\n          onClose={() => { setShowModuleModal(false); setEditingModule(null); }}\n          onSave={saveModule}\n        />\n      )}\n\n      {/* Lesson Modal */}\n      {showLessonModal && (\n        <LessonModal\n          lesson={editingLesson}\n          onClose={() => { setShowLessonModal(false); setEditingLesson(null); setSelectedModuleId(null); }}\n          onSave={saveLesson}\n        />\n      )}\n    </div>\n  );\n};\n\n// Module Modal Component\nconst ModuleModal = ({ module, onClose, onSave }) => {\n  const [formData, setFormData] = useState({\n    title: module?.title || '',\n    description: module?.description || ''\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onSave(formData);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full\">\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-2xl font-bold\">{module ? 'Edit Module' : 'Add New Module'}</h2>\n            <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">\n              <XMarkIcon className=\"w-6 h-6\" />\n            </button>\n          </div>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Module Title *</label>\n              <input\n                type=\"text\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                required\n                placeholder=\"e.g., Introduction to the Course\"\n                data-testid=\"module-title-input\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n              <textarea\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows=\"3\"\n                placeholder=\"Brief description of what this module covers\"\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-4\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                data-testid=\"save-module-button\"\n              >\n                {module ? 'Update Module' : 'Add Module'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Lesson Modal Component  \nconst LessonModal = ({ lesson, onClose, onSave }) => {\n  const [formData, setFormData] = useState({\n    title: lesson?.title || '',\n    description: lesson?.description || '',\n    content_type: lesson?.content_type || 'text',\n    duration: lesson?.duration || 0,\n    content: lesson?.content || {}\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onSave(formData);\n  };\n\n  const renderContentEditor = () => {\n    switch (formData.content_type) {\n      case 'video':\n        return <VideoEditor formData={formData} setFormData={setFormData} />;\n      case 'text':\n        return <TextEditor formData={formData} setFormData={setFormData} />;\n      case 'pdf':\n        return <PDFEditor formData={formData} setFormData={setFormData} />;\n      case 'quiz':\n        return <QuizEditor formData={formData} setFormData={setFormData} />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-2xl font-bold\">{lesson ? 'Edit Lesson' : 'Add New Lesson'}</h2>\n            <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">\n              <XMarkIcon className=\"w-6 h-6\" />\n            </button>\n          </div>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Lesson Title *</label>\n                <input\n                  type=\"text\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  required\n                  placeholder=\"e.g., Introduction to Variables\"\n                  data-testid=\"lesson-title-input\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Duration (minutes)</label>\n                <input\n                  type=\"number\"\n                  value={formData.duration}\n                  onChange={(e) => setFormData({ ...formData, duration: parseInt(e.target.value) || 0 })}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  min=\"0\"\n                  placeholder=\"e.g., 15\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n              <textarea\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows=\"2\"\n                placeholder=\"Brief description of the lesson\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Content Type *</label>\n              <div className=\"grid grid-cols-4 gap-3\">\n                {[\n                  { value: 'video', icon: PlayIcon, label: 'Video' },\n                  { value: 'text', icon: DocumentTextIcon, label: 'Text' },\n                  { value: 'pdf', icon: DocumentTextIcon, label: 'PDF' },\n                  { value: 'quiz', icon: QuestionMarkCircleIcon, label: 'Quiz' }\n                ].map(({ value, icon: Icon, label }) => (\n                  <button\n                    key={value}\n                    type=\"button\"\n                    onClick={() => setFormData({ ...formData, content_type: value, content: {} })}\n                    className={`p-4 border-2 rounded-lg flex flex-col items-center justify-center transition-colors ${\n                      formData.content_type === value\n                        ? 'border-blue-600 bg-blue-50 text-blue-600'\n                        : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                    data-testid={`content-type-${value}`}\n                  >\n                    <Icon className=\"w-8 h-8 mb-2\" />\n                    <span className=\"text-sm font-medium\">{label}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Content Editor */}\n            <div className=\"border-t pt-6\">\n              {renderContentEditor()}\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                data-testid=\"save-lesson-button\"\n              >\n                {lesson ? 'Update Lesson' : 'Add Lesson'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Video Editor Component\nconst VideoEditor = ({ formData, setFormData }) => {\n  const [videoSource, setVideoSource] = useState(formData.content?.file_url ? 'file' : 'url');\n\n  return (\n    <div className=\"space-y-4\">\n      <h3 className=\"font-semibold text-gray-900\">Video Configuration</h3>\n      \n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Video Source</label>\n        <div className=\"flex space-x-4\">\n          <label className=\"flex items-center\">\n            <input\n              type=\"radio\"\n              value=\"url\"\n              checked={videoSource === 'url'}\n              onChange={(e) => setVideoSource(e.target.value)}\n              className=\"mr-2\"\n            />\n            <span>YouTube/Vimeo URL</span>\n          </label>\n          <label className=\"flex items-center\">\n            <input\n              type=\"radio\"\n              value=\"file\"\n              checked={videoSource === 'file'}\n              onChange={(e) => setVideoSource(e.target.value)}\n              className=\"mr-2\"\n            />\n            <span>File Upload</span>\n          </label>\n        </div>\n      </div>\n\n      {videoSource === 'url' ? (\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Video URL</label>\n          <input\n            type=\"url\"\n            value={formData.content?.url || ''}\n            onChange={(e) => setFormData({\n              ...formData,\n              content: { ...formData.content, url: e.target.value }\n            })}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"https://www.youtube.com/embed/...\"\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Use embed URL format for YouTube/Vimeo\n          </p>\n        </div>\n      ) : (\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Video File URL</label>\n          <input\n            type=\"url\"\n            value={formData.content?.file_url || ''}\n            onChange={(e) => setFormData({\n              ...formData,\n              content: { ...formData.content, file_url: e.target.value }\n            })}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"https://example.com/video.mp4\"\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Direct link to video file (.mp4, .webm, etc.)\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Text Editor Component\nconst TextEditor = ({ formData, setFormData }) => {\n  return (\n    <div className=\"space-y-4\">\n      <h3 className=\"font-semibold text-gray-900\">Text Content</h3>\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Lesson Content</label>\n        <textarea\n          value={formData.content?.text || ''}\n          onChange={(e) => setFormData({\n            ...formData,\n            content: { ...formData.content, text: e.target.value }\n          })}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono\"\n          rows=\"12\"\n          placeholder=\"Enter lesson content here. You can use HTML tags for formatting.\"\n          data-testid=\"text-content-input\"\n        />\n        <p className=\"text-xs text-gray-500 mt-1\">\n          Supports HTML formatting: &lt;h1&gt;, &lt;p&gt;, &lt;strong&gt;, &lt;em&gt;, &lt;ul&gt;, &lt;ol&gt;, &lt;code&gt;, etc.\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// PDF Editor Component\nconst PDFEditor = ({ formData, setFormData }) => {\n  return (\n    <div className=\"space-y-4\">\n      <h3 className=\"font-semibold text-gray-900\">PDF Document</h3>\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 mb-1\">PDF URL</label>\n        <input\n          type=\"url\"\n          value={formData.content?.url || ''}\n          onChange={(e) => setFormData({\n            ...formData,\n            content: { ...formData.content, url: e.target.value }\n          })}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          placeholder=\"https://example.com/document.pdf\"\n        />\n        <p className=\"text-xs text-gray-500 mt-1\">\n          Direct link to PDF file\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// Quiz Editor Component\nconst QuizEditor = ({ formData, setFormData }) => {\n  const [questions, setQuestions] = useState(formData.content?.questions || []);\n\n  const addQuestion = () => {\n    setQuestions([...questions, {\n      question: '',\n      answers: ['', '', '', ''],\n      correct_answer: 0\n    }]);\n  };\n\n  const updateQuestion = (index, field, value) => {\n    const newQuestions = [...questions];\n    newQuestions[index] = { ...newQuestions[index], [field]: value };\n    setQuestions(newQuestions);\n    setFormData({\n      ...formData,\n      content: { ...formData.content, questions: newQuestions }\n    });\n  };\n\n  const updateAnswer = (qIndex, aIndex, value) => {\n    const newQuestions = [...questions];\n    newQuestions[qIndex].answers[aIndex] = value;\n    setQuestions(newQuestions);\n    setFormData({\n      ...formData,\n      content: { ...formData.content, questions: newQuestions }\n    });\n  };\n\n  const removeQuestion = (index) => {\n    const newQuestions = questions.filter((_, i) => i !== index);\n    setQuestions(newQuestions);\n    setFormData({\n      ...formData,\n      content: { ...formData.content, questions: newQuestions }\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"font-semibold text-gray-900\">Quiz Questions</h3>\n        <button\n          type=\"button\"\n          onClick={addQuestion}\n          className=\"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 text-sm\"\n          data-testid=\"add-quiz-question-button\"\n        >\n          + Add Question\n        </button>\n      </div>\n\n      {questions.length === 0 ? (\n        <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg\">\n          <QuestionMarkCircleIcon className=\"w-12 h-12 text-gray-300 mx-auto mb-2\" />\n          <p className=\"text-gray-500\">No questions yet. Click \"Add Question\" to get started.</p>\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {questions.map((question, qIndex) => (\n            <div key={qIndex} className=\"border rounded-lg p-4 bg-gray-50\">\n              <div className=\"flex items-start justify-between mb-3\">\n                <h4 className=\"font-medium text-gray-900\">Question {qIndex + 1}</h4>\n                <button\n                  type=\"button\"\n                  onClick={() => removeQuestion(qIndex)}\n                  className=\"text-red-600 hover:text-red-700\"\n                >\n                  <TrashIcon className=\"w-5 h-5\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-3\">\n                <input\n                  type=\"text\"\n                  value={question.question}\n                  onChange={(e) => updateQuestion(qIndex, 'question', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Enter your question\"\n                  data-testid={`quiz-question-${qIndex}`}\n                />\n\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">Answers (select correct one)</label>\n                  {question.answers.map((answer, aIndex) => (\n                    <div key={aIndex} className=\"flex items-center space-x-2\">\n                      <input\n                        type=\"radio\"\n                        name={`correct-${qIndex}`}\n                        checked={question.correct_answer === aIndex}\n                        onChange={() => updateQuestion(qIndex, 'correct_answer', aIndex)}\n                        className=\"flex-shrink-0\"\n                      />\n                      <input\n                        type=\"text\"\n                        value={answer}\n                        onChange={(e) => updateAnswer(qIndex, aIndex, e.target.value)}\n                        className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                        placeholder={`Answer ${aIndex + 1}`}\n                        data-testid={`quiz-answer-${qIndex}-${aIndex}`}\n                      />\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EnhancedCourseBuilder;\n"],"mappings":"kGAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,GAAG,KAAM,QAAQ,CACxB,OAASC,eAAe,CAAEC,SAAS,CAAEC,SAAS,KAAQ,qBAAqB,CAC3E,OACEC,QAAQ,CACRC,YAAY,CACZC,QAAQ,CACRC,gBAAgB,CAChBC,sBAAsB,CACtBC,SAAS,CACTC,UAAU,CACVC,eAAe,CACfC,aAAa,CACbC,SAAS,CACTC,SAAS,KACJ,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErC,KAAM,CAAAC,qBAAqB,CAAGC,IAAA,EAAwB,IAAvB,CAAEC,MAAM,CAAEC,MAAO,CAAC,CAAAF,IAAA,CAC/C,KAAM,CAACG,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAC2B,OAAO,CAAEC,UAAU,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC6B,eAAe,CAAEC,kBAAkB,CAAC,CAAG9B,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAC+B,eAAe,CAAEC,kBAAkB,CAAC,CAAGhC,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACiC,aAAa,CAAEC,gBAAgB,CAAC,CAAGlC,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACmC,aAAa,CAAEC,gBAAgB,CAAC,CAAGpC,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACqC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGtC,QAAQ,CAAC,IAAI,CAAC,CAC9D,KAAM,CAACuC,eAAe,CAAEC,kBAAkB,CAAC,CAAGxC,QAAQ,CAAC,GAAI,CAAAyC,GAAG,CAAC,CAAC,CAAC,CAEjExC,SAAS,CAAC,IAAM,CACdyC,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,KAAAC,qBAAA,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA1C,GAAG,CAAC2C,GAAG,aAAAC,MAAA,CAAavB,MAAM,CAACwB,EAAE,CAAE,CAAC,CACvDrB,UAAU,CAACkB,QAAQ,CAACI,IAAI,CAACvB,OAAO,EAAI,EAAE,CAAC,CACvC;AACA,KAAM,CAAAwB,YAAY,CAAG,GAAI,CAAAR,GAAG,CAAC,EAAAE,qBAAA,CAAAC,QAAQ,CAACI,IAAI,CAACvB,OAAO,UAAAkB,qBAAA,iBAArBA,qBAAA,CAAuBO,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACJ,EAAE,CAAC,GAAI,EAAE,CAAC,CACzEP,kBAAkB,CAACS,YAAY,CAAC,CAClC,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACxD,CAAC,OAAS,CACRxB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAA0B,YAAY,CAAIC,QAAQ,EAAK,CACjCf,kBAAkB,CAACgB,IAAI,EAAI,CACzB,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAhB,GAAG,CAACe,IAAI,CAAC,CAC5B,GAAIC,MAAM,CAACC,GAAG,CAACH,QAAQ,CAAC,CAAE,CACxBE,MAAM,CAACE,MAAM,CAACJ,QAAQ,CAAC,CACzB,CAAC,IAAM,CACLE,MAAM,CAACG,GAAG,CAACL,QAAQ,CAAC,CACtB,CACA,MAAO,CAAAE,MAAM,CACf,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAI,aAAa,CAAG,KAAO,CAAAC,MAAM,EAAK,CACtC,GAAI,CAACA,MAAM,CAACC,WAAW,CAAE,OAEzB,KAAM,CAAEC,MAAM,CAAED,WAAW,CAAEE,IAAK,CAAC,CAAGH,MAAM,CAE5C,GAAIG,IAAI,GAAK,QAAQ,CAAE,CACrB;AACA,KAAM,CAAAC,UAAU,CAAGC,KAAK,CAACC,IAAI,CAAC3C,OAAO,CAAC,CACtC,KAAM,CAAC4C,OAAO,CAAC,CAAGH,UAAU,CAACI,MAAM,CAACN,MAAM,CAACO,KAAK,CAAE,CAAC,CAAC,CACpDL,UAAU,CAACI,MAAM,CAACP,WAAW,CAACQ,KAAK,CAAE,CAAC,CAAEF,OAAO,CAAC,CAEhD;AACA,KAAM,CAAAG,cAAc,CAAGN,UAAU,CAAChB,GAAG,CAAC,CAACuB,GAAG,CAAEC,GAAG,GAAAC,aAAA,CAAAA,aAAA,IAC1CF,GAAG,MACNG,KAAK,CAAEF,GAAG,EACV,CAAC,CAEHhD,UAAU,CAAC8C,cAAc,CAAC,CAE1B;AACA,GAAI,CACF,KAAM,CAAAK,OAAO,CAACC,GAAG,CAACN,cAAc,CAACtB,GAAG,CAACuB,GAAG,EACtCvE,GAAG,CAAC6E,GAAG,aAAAjC,MAAA,CAAavB,MAAM,CAACwB,EAAE,cAAAD,MAAA,CAAY2B,GAAG,CAAC1B,EAAE,EAAI,CAAE6B,KAAK,CAAEH,GAAG,CAACG,KAAM,CAAC,CACzE,CAAC,CAAC,CACJ,CAAE,MAAOxB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDV,kBAAkB,CAAC,CAAC,CAAE;AACxB,CACF,CAAC,IAAM,IAAIuB,IAAI,GAAK,QAAQ,CAAE,CAC5B;AACA,KAAM,CAAAV,QAAQ,CAAGS,MAAM,CAACgB,WAAW,CACnC,KAAM,CAAAC,WAAW,CAAGxD,OAAO,CAACyD,SAAS,CAAC/B,CAAC,EAAIA,CAAC,CAACJ,EAAE,GAAKQ,QAAQ,CAAC,CAC7D,KAAM,CAAA4B,MAAM,CAAG1D,OAAO,CAACwD,WAAW,CAAC,CAEnC,KAAM,CAAAG,UAAU,CAAGjB,KAAK,CAACC,IAAI,CAACe,MAAM,CAACE,OAAO,EAAI,EAAE,CAAC,CACnD,KAAM,CAAChB,OAAO,CAAC,CAAGe,UAAU,CAACd,MAAM,CAACN,MAAM,CAACO,KAAK,CAAE,CAAC,CAAC,CACpDa,UAAU,CAACd,MAAM,CAACP,WAAW,CAACQ,KAAK,CAAE,CAAC,CAAEF,OAAO,CAAC,CAEhD;AACA,KAAM,CAAAiB,cAAc,CAAGF,UAAU,CAAClC,GAAG,CAAC,CAACqC,MAAM,CAAEb,GAAG,GAAAC,aAAA,CAAAA,aAAA,IAC7CY,MAAM,MACTX,KAAK,CAAEF,GAAG,EACV,CAAC,CAEH,KAAM,CAAAR,UAAU,CAAG,CAAC,GAAGzC,OAAO,CAAC,CAC/ByC,UAAU,CAACe,WAAW,CAAC,CAAAN,aAAA,CAAAA,aAAA,IAAQQ,MAAM,MAAEE,OAAO,CAAEC,cAAc,EAAE,CAChE5D,UAAU,CAACwC,UAAU,CAAC,CAEtB;AACA,GAAI,CACF,KAAM,CAAAW,OAAO,CAACC,GAAG,CAACQ,cAAc,CAACpC,GAAG,CAACqC,MAAM,EACzCrF,GAAG,CAAC6E,GAAG,aAAAjC,MAAA,CAAavB,MAAM,CAACwB,EAAE,cAAAD,MAAA,CAAYS,QAAQ,cAAAT,MAAA,CAAYyC,MAAM,CAACxC,EAAE,EAAI,CAAE6B,KAAK,CAAEW,MAAM,CAACX,KAAM,CAAC,CACnG,CAAC,CAAC,CACJ,CAAE,MAAOxB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDV,kBAAkB,CAAC,CAAC,CAAE;AACxB,CACF,CACF,CAAC,CAED,KAAM,CAAA8C,UAAU,CAAG,KAAO,CAAAC,UAAU,EAAK,CACvC,GAAI,CACF,GAAIxD,aAAa,CAAE,CACjB,KAAM,CAAA/B,GAAG,CAAC6E,GAAG,aAAAjC,MAAA,CAAavB,MAAM,CAACwB,EAAE,cAAAD,MAAA,CAAYb,aAAa,CAACc,EAAE,EAAI0C,UAAU,CAAC,CAChF,CAAC,IAAM,CACL,KAAM,CAAAvF,GAAG,CAACwF,IAAI,aAAA5C,MAAA,CAAavB,MAAM,CAACwB,EAAE,aAAA4B,aAAA,CAAAA,aAAA,IAC/Bc,UAAU,MACbb,KAAK,CAAEnD,OAAO,CAACkE,MAAM,EACtB,CAAC,CACJ,CACAjD,kBAAkB,CAAC,CAAC,CACpBZ,kBAAkB,CAAC,KAAK,CAAC,CACzBI,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAE,MAAOkB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5CwC,KAAK,CAAC,uBAAuB,CAAC,CAChC,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAtC,QAAQ,EAAK,CACvC,GAAI,CAACuC,MAAM,CAACC,OAAO,CAAC,yCAAyC,CAAC,CAAE,OAEhE,GAAI,CACF,KAAM,CAAA7F,GAAG,CAACyD,MAAM,aAAAb,MAAA,CAAavB,MAAM,CAACwB,EAAE,cAAAD,MAAA,CAAYS,QAAQ,CAAE,CAAC,CAC7Db,kBAAkB,CAAC,CAAC,CACtB,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CwC,KAAK,CAAC,yBAAyB,CAAC,CAClC,CACF,CAAC,CAED,KAAM,CAAAI,UAAU,CAAG,KAAO,CAAAC,UAAU,EAAK,CACvC,GAAI,CACF,GAAI9D,aAAa,CAAE,CACjB,KAAM,CAAAjC,GAAG,CAAC6E,GAAG,aAAAjC,MAAA,CACCvB,MAAM,CAACwB,EAAE,cAAAD,MAAA,CAAYT,gBAAgB,cAAAS,MAAA,CAAYX,aAAa,CAACY,EAAE,EAC7EkD,UACF,CAAC,CACH,CAAC,IAAM,KAAAC,eAAA,CACL,KAAM,CAAAf,MAAM,CAAG1D,OAAO,CAAC0E,IAAI,CAAChD,CAAC,EAAIA,CAAC,CAACJ,EAAE,GAAKV,gBAAgB,CAAC,CAC3D,KAAM,CAAAnC,GAAG,CAACwF,IAAI,aAAA5C,MAAA,CAAavB,MAAM,CAACwB,EAAE,cAAAD,MAAA,CAAYT,gBAAgB,aAAAsC,aAAA,CAAAA,aAAA,IAC3DsB,UAAU,MACbrB,KAAK,CAAE,EAAAsB,eAAA,CAAAf,MAAM,CAACE,OAAO,UAAAa,eAAA,iBAAdA,eAAA,CAAgBP,MAAM,GAAI,CAAC,EACnC,CAAC,CACJ,CACAjD,kBAAkB,CAAC,CAAC,CACpBV,kBAAkB,CAAC,KAAK,CAAC,CACzBI,gBAAgB,CAAC,IAAI,CAAC,CACtBE,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAE,MAAOc,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5CwC,KAAK,CAAC,uBAAuB,CAAC,CAChC,CACF,CAAC,CAED,KAAM,CAAAQ,YAAY,CAAG,KAAAA,CAAO7C,QAAQ,CAAE8C,QAAQ,GAAK,CACjD,GAAI,CAACP,MAAM,CAACC,OAAO,CAAC,qBAAqB,CAAC,CAAE,OAE5C,GAAI,CACF,KAAM,CAAA7F,GAAG,CAACyD,MAAM,aAAAb,MAAA,CAAavB,MAAM,CAACwB,EAAE,cAAAD,MAAA,CAAYS,QAAQ,cAAAT,MAAA,CAAYuD,QAAQ,CAAE,CAAC,CACjF3D,kBAAkB,CAAC,CAAC,CACtB,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CwC,KAAK,CAAC,yBAAyB,CAAC,CAClC,CACF,CAAC,CAED,KAAM,CAAAU,aAAa,CAAI/C,QAAQ,EAAK,CAClCjB,mBAAmB,CAACiB,QAAQ,CAAC,CAC7BnB,gBAAgB,CAAC,IAAI,CAAC,CACtBJ,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAuE,cAAc,CAAGA,CAAChD,QAAQ,CAAEgC,MAAM,GAAK,CAC3CjD,mBAAmB,CAACiB,QAAQ,CAAC,CAC7BnB,gBAAgB,CAACmD,MAAM,CAAC,CACxBvD,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAwE,aAAa,CAAIC,WAAW,EAAK,CACrC,OAAQA,WAAW,EACjB,IAAK,OAAO,CAAE,MAAO,CAAAjG,QAAQ,CAC7B,IAAK,MAAM,CAAE,MAAO,CAAAC,gBAAgB,CACpC,IAAK,KAAK,CAAE,MAAO,CAAAA,gBAAgB,CACnC,IAAK,MAAM,CAAE,MAAO,CAAAC,sBAAsB,CAC1C,QAAS,MAAO,CAAAH,YAAY,CAC9B,CACF,CAAC,CAED,GAAIoB,OAAO,CAAE,CACX,mBACET,IAAA,QAAKwF,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvEzF,IAAA,QAAKwF,SAAS,CAAC,gEAAgE,CAAM,CAAC,CACnF,CAAC,CAEV,CAEA,mBACEtF,KAAA,QAAKsF,SAAS,CAAC,6BAA6B,CAAC,cAAY,yBAAyB,CAAAC,QAAA,eAEhFvF,KAAA,QAAKsF,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBzF,IAAA,WACE0F,OAAO,CAAEpF,MAAO,CAChBkF,SAAS,CAAC,0DAA0D,CACpE,cAAY,wBAAwB,CAAAC,QAAA,CACrC,wBAED,CAAQ,CAAC,cACTzF,IAAA,OAAIwF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAEpF,MAAM,CAACsF,KAAK,CAAK,CAAC,cACzE3F,IAAA,MAAGwF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,4CAA0C,CAAG,CAAC,EACxE,CAAC,cAGNvF,KAAA,QAAKsF,SAAS,CAAC,uEAAuE,CAAAC,QAAA,eACpFvF,KAAA,QAAKsF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EACnClF,OAAO,CAACkE,MAAM,CAAC,kBAAW,CAAClE,OAAO,CAACqF,MAAM,CAAC,CAACC,GAAG,CAAE5D,CAAC,QAAA6D,UAAA,OAAK,CAAAD,GAAG,EAAI,EAAAC,UAAA,CAAA7D,CAAC,CAACkC,OAAO,UAAA2B,UAAA,iBAATA,UAAA,CAAWrB,MAAM,GAAI,CAAC,CAAC,GAAE,CAAC,CAAC,CAAC,UAC5F,EAAK,CAAC,cACNvE,KAAA,WACEwF,OAAO,CAAEA,CAAA,GAAM,CAAE1E,gBAAgB,CAAC,IAAI,CAAC,CAAEJ,kBAAkB,CAAC,IAAI,CAAC,CAAE,CAAE,CACrE4E,SAAS,CAAC,iFAAiF,CAC3F,cAAY,mBAAmB,CAAAC,QAAA,eAE/BzF,IAAA,CAACZ,QAAQ,EAACoG,SAAS,CAAC,cAAc,CAAE,CAAC,aAEvC,EAAQ,CAAC,EACN,CAAC,cAGNxF,IAAA,QAAKwF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CACxClF,OAAO,CAACkE,MAAM,GAAK,CAAC,cACnBvE,KAAA,QAAKsF,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCzF,IAAA,CAACX,YAAY,EAACmG,SAAS,CAAC,sCAAsC,CAAE,CAAC,cACjExF,IAAA,OAAIwF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC1EzF,IAAA,MAAGwF,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,oDAAkD,CAAG,CAAC,cACxFzF,IAAA,WACE0F,OAAO,CAAEA,CAAA,GAAM9E,kBAAkB,CAAC,IAAI,CAAE,CACxC4E,SAAS,CAAC,+DAA+D,CAAAC,QAAA,CAC1E,kBAED,CAAQ,CAAC,EACN,CAAC,cAENzF,IAAA,CAACf,eAAe,EAAC8G,SAAS,CAAEpD,aAAc,CAAA8C,QAAA,cACxCzF,IAAA,CAACd,SAAS,EAAC4E,WAAW,CAAC,SAAS,CAACf,IAAI,CAAC,QAAQ,CAAA0C,QAAA,CAC1CO,QAAQ,eACR9F,KAAA,OAAAuD,aAAA,CAAAA,aAAA,IACMuC,QAAQ,CAACC,cAAc,MAC3BC,GAAG,CAAEF,QAAQ,CAACG,QAAS,CACvBX,SAAS,CAAC,eAAe,CAAAC,QAAA,EAExBlF,OAAO,CAACyB,GAAG,CAAC,CAACiC,MAAM,CAAEF,WAAW,gBAC/B/D,IAAA,CAACb,SAAS,EAAiBiH,WAAW,CAAEnC,MAAM,CAACpC,EAAG,CAACwB,KAAK,CAAEU,WAAY,CAAA0B,QAAA,CACnEA,CAACO,QAAQ,CAAEK,QAAQ,QAAAC,gBAAA,oBAClBpG,KAAA,OAAAuD,aAAA,CAAAA,aAAA,EACEyC,GAAG,CAAEF,QAAQ,CAACG,QAAS,EACnBH,QAAQ,CAACO,cAAc,MAC3Bf,SAAS,sBAAA5D,MAAA,CACPyE,QAAQ,CAACG,UAAU,CAAG,uBAAuB,CAAG,UAAU,CACzD,CAAAf,QAAA,eAGHvF,KAAA,QAAKsF,SAAS,CAAC,2DAA2D,CAAAC,QAAA,eACxEvF,KAAA,QAAKsF,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzF,IAAA,OAAAyD,aAAA,CAAAA,aAAA,IAASuC,QAAQ,CAACS,eAAe,MAAEjB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC7DzF,IAAA,CAACH,SAAS,EAAC2F,SAAS,CAAC,uBAAuB,CAAE,CAAC,EAC5C,CAAC,cACNxF,IAAA,WACE0F,OAAO,CAAEA,CAAA,GAAMtD,YAAY,CAAC6B,MAAM,CAACpC,EAAE,CAAE,CACvC2D,SAAS,CAAC,MAAM,CAAAC,QAAA,CAEfpE,eAAe,CAACmB,GAAG,CAACyB,MAAM,CAACpC,EAAE,CAAC,cAC7B7B,IAAA,CAACJ,aAAa,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,cAEnDxF,IAAA,CAACL,eAAe,EAAC6F,SAAS,CAAC,uBAAuB,CAAE,CACrD,CACK,CAAC,cACTtF,KAAA,QAAKsF,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBvF,KAAA,OAAIsF,SAAS,CAAC,qCAAqC,CAAAC,QAAA,EAAC,SAC3C,CAAC1B,WAAW,CAAG,CAAC,CAAC,IAAE,CAACE,MAAM,CAAC0B,KAAK,EACrC,CAAC,CACJ1B,MAAM,CAACyC,WAAW,eACjB1G,IAAA,MAAGwF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAExB,MAAM,CAACyC,WAAW,CAAI,CAClE,cACDxG,KAAA,MAAGsF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EACtC,EAAAa,gBAAA,CAAArC,MAAM,CAACE,OAAO,UAAAmC,gBAAA,iBAAdA,gBAAA,CAAgB7B,MAAM,GAAI,CAAC,CAAC,UAC/B,EAAG,CAAC,EACD,CAAC,EACH,CAAC,cACNvE,KAAA,QAAKsF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CzF,IAAA,WACE0F,OAAO,CAAEA,CAAA,GAAMN,aAAa,CAACnB,MAAM,CAACpC,EAAE,CAAE,CACxC2D,SAAS,CAAC,yEAAyE,CACnF,4BAAA5D,MAAA,CAA2BqC,MAAM,CAACpC,EAAE,CAAG,CAAA4D,QAAA,CACxC,cAED,CAAQ,CAAC,cACTzF,IAAA,WACE0F,OAAO,CAAEA,CAAA,GAAM,CAAE1E,gBAAgB,CAACiD,MAAM,CAAC,CAAErD,kBAAkB,CAAC,IAAI,CAAC,CAAE,CAAE,CACvE4E,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cAEjDzF,IAAA,CAACN,UAAU,EAAC8F,SAAS,CAAC,SAAS,CAAE,CAAC,CAC5B,CAAC,cACTxF,IAAA,WACE0F,OAAO,CAAEA,CAAA,GAAMf,YAAY,CAACV,MAAM,CAACpC,EAAE,CAAE,CACvC2D,SAAS,CAAC,sCAAsC,CAAAC,QAAA,cAEhDzF,IAAA,CAACP,SAAS,EAAC+F,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,EACN,CAAC,EACH,CAAC,CAGLnE,eAAe,CAACmB,GAAG,CAACyB,MAAM,CAACpC,EAAE,CAAC,eAC7B7B,IAAA,CAACd,SAAS,EAAC4E,WAAW,CAAEG,MAAM,CAACpC,EAAG,CAACkB,IAAI,CAAC,QAAQ,CAAA0C,QAAA,CAC5CO,QAAQ,eACR9F,KAAA,OAAAuD,aAAA,CAAAA,aAAA,IACMuC,QAAQ,CAACC,cAAc,MAC3BC,GAAG,CAAEF,QAAQ,CAACG,QAAS,CACvBX,SAAS,CAAC,eAAe,CAAAC,QAAA,EAExBxB,MAAM,CAACE,OAAO,EAAIF,MAAM,CAACE,OAAO,CAACM,MAAM,CAAG,CAAC,CAC1CR,MAAM,CAACE,OAAO,CAACnC,GAAG,CAAC,CAACqC,MAAM,CAAEsC,WAAW,GAAK,CAC1C,KAAM,CAAAC,UAAU,CAAGtB,aAAa,CAACjB,MAAM,CAACwC,YAAY,CAAC,CACrD,mBACE7G,IAAA,CAACb,SAAS,EAERiH,WAAW,CAAE/B,MAAM,CAACxC,EAAG,CACvBwB,KAAK,CAAEsD,WAAY,CAAAlB,QAAA,CAElBA,CAACO,QAAQ,CAAEK,QAAQ,gBAClBnG,KAAA,OAAAuD,aAAA,CAAAA,aAAA,EACEyC,GAAG,CAAEF,QAAQ,CAACG,QAAS,EACnBH,QAAQ,CAACO,cAAc,MAC3Bf,SAAS,4DAAA5D,MAAA,CACPyE,QAAQ,CAACG,UAAU,CACf,sBAAsB,CACtB,8BAA8B,CACjC,CAAAf,QAAA,eAEHvF,KAAA,QAAKsF,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzF,IAAA,OAAAyD,aAAA,CAAAA,aAAA,IAASuC,QAAQ,CAACS,eAAe,MAAEjB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC7DzF,IAAA,CAACH,SAAS,EAAC2F,SAAS,CAAC,uBAAuB,CAAE,CAAC,EAC5C,CAAC,cACNxF,IAAA,CAAC4G,UAAU,EAACpB,SAAS,CAAC,4BAA4B,CAAE,CAAC,cACrDtF,KAAA,QAAAuF,QAAA,eACEvF,KAAA,MAAGsF,SAAS,CAAC,2BAA2B,CAAAC,QAAA,EAAC,SAChC,CAACkB,WAAW,CAAG,CAAC,CAAC,IAAE,CAACtC,MAAM,CAACsB,KAAK,EACtC,CAAC,cACJzF,KAAA,MAAGsF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EACjCpB,MAAM,CAACwC,YAAY,CACnBxC,MAAM,CAACyC,QAAQ,aAAAlF,MAAA,CAAUyC,MAAM,CAACyC,QAAQ,QAAM,EAC9C,CAAC,EACD,CAAC,EACH,CAAC,cACN5G,KAAA,QAAKsF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CzF,IAAA,WACE0F,OAAO,CAAEA,CAAA,GAAML,cAAc,CAACpB,MAAM,CAACpC,EAAE,CAAEwC,MAAM,CAAE,CACjDmB,SAAS,CAAC,yCAAyC,CACnD,6BAAA5D,MAAA,CAA4ByC,MAAM,CAACxC,EAAE,CAAG,CAAA4D,QAAA,cAExCzF,IAAA,CAACN,UAAU,EAAC8F,SAAS,CAAC,SAAS,CAAE,CAAC,CAC5B,CAAC,cACTxF,IAAA,WACE0F,OAAO,CAAEA,CAAA,GAAMR,YAAY,CAACjB,MAAM,CAACpC,EAAE,CAAEwC,MAAM,CAACxC,EAAE,CAAE,CAClD2D,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cAElDzF,IAAA,CAACP,SAAS,EAAC+F,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,EACN,CAAC,GACH,CACN,EA7CInB,MAAM,CAACxC,EA8CH,CAAC,CAEhB,CAAC,CAAC,cAEF7B,IAAA,QAAKwF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,sDAExD,CAAK,CACN,CACAO,QAAQ,CAACe,WAAW,GAClB,CACN,CACQ,CACZ,GACE,CAAC,EACP,EAtIa9C,MAAM,CAACpC,EAuIZ,CACZ,CAAC,CACDmE,QAAQ,CAACe,WAAW,GAClB,CACN,CACQ,CAAC,CACG,CAClB,CACE,CAAC,CAGLpG,eAAe,eACdX,IAAA,CAACgH,WAAW,EACV/C,MAAM,CAAElD,aAAc,CACtBkG,OAAO,CAAEA,CAAA,GAAM,CAAErG,kBAAkB,CAAC,KAAK,CAAC,CAAEI,gBAAgB,CAAC,IAAI,CAAC,CAAE,CAAE,CACtEkG,MAAM,CAAE5C,UAAW,CACpB,CACF,CAGAzD,eAAe,eACdb,IAAA,CAACmH,WAAW,EACV9C,MAAM,CAAEpD,aAAc,CACtBgG,OAAO,CAAEA,CAAA,GAAM,CAAEnG,kBAAkB,CAAC,KAAK,CAAC,CAAEI,gBAAgB,CAAC,IAAI,CAAC,CAAEE,mBAAmB,CAAC,IAAI,CAAC,CAAE,CAAE,CACjG8F,MAAM,CAAEpC,UAAW,CACpB,CACF,EACE,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAAkC,WAAW,CAAGI,KAAA,EAAiC,IAAhC,CAAEnD,MAAM,CAAEgD,OAAO,CAAEC,MAAO,CAAC,CAAAE,KAAA,CAC9C,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGxI,QAAQ,CAAC,CACvC6G,KAAK,CAAE,CAAA1B,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAE0B,KAAK,GAAI,EAAE,CAC1Be,WAAW,CAAE,CAAAzC,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEyC,WAAW,GAAI,EACtC,CAAC,CAAC,CAEF,KAAM,CAAAa,YAAY,CAAIC,CAAC,EAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBP,MAAM,CAACG,QAAQ,CAAC,CAClB,CAAC,CAED,mBACErH,IAAA,QAAKwF,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7FzF,IAAA,QAAKwF,SAAS,CAAC,sCAAsC,CAAAC,QAAA,cACnDvF,KAAA,QAAKsF,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBvF,KAAA,QAAKsF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDzF,IAAA,OAAIwF,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAExB,MAAM,CAAG,aAAa,CAAG,gBAAgB,CAAK,CAAC,cACnFjE,IAAA,WAAQ0F,OAAO,CAAEuB,OAAQ,CAACzB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cACrEzF,IAAA,CAACF,SAAS,EAAC0F,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,EACN,CAAC,cAENtF,KAAA,SAAMwH,QAAQ,CAAEH,YAAa,CAAC/B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACjDvF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,gBAAc,CAAO,CAAC,cACtFzF,IAAA,UACE+C,IAAI,CAAC,MAAM,CACX4E,KAAK,CAAEN,QAAQ,CAAC1B,KAAM,CACtBiC,QAAQ,CAAGJ,CAAC,EAAKF,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IAAM4D,QAAQ,MAAE1B,KAAK,CAAE6B,CAAC,CAACK,MAAM,CAACF,KAAK,EAAE,CAAE,CACrEnC,SAAS,CAAC,qFAAqF,CAC/FsC,QAAQ,MACRf,WAAW,CAAC,kCAAkC,CAC9C,cAAY,oBAAoB,CACjC,CAAC,EACC,CAAC,cAEN7G,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,aAAW,CAAO,CAAC,cACnFzF,IAAA,aACE2H,KAAK,CAAEN,QAAQ,CAACX,WAAY,CAC5BkB,QAAQ,CAAGJ,CAAC,EAAKF,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IAAM4D,QAAQ,MAAEX,WAAW,CAAEc,CAAC,CAACK,MAAM,CAACF,KAAK,EAAE,CAAE,CAC3EnC,SAAS,CAAC,qFAAqF,CAC/FuC,IAAI,CAAC,GAAG,CACRhB,WAAW,CAAC,8CAA8C,CAC3D,CAAC,EACC,CAAC,cAEN7G,KAAA,QAAKsF,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CzF,IAAA,WACE+C,IAAI,CAAC,QAAQ,CACb2C,OAAO,CAAEuB,OAAQ,CACjBzB,SAAS,CAAC,4EAA4E,CAAAC,QAAA,CACvF,QAED,CAAQ,CAAC,cACTzF,IAAA,WACE+C,IAAI,CAAC,QAAQ,CACbyC,SAAS,CAAC,+DAA+D,CACzE,cAAY,oBAAoB,CAAAC,QAAA,CAE/BxB,MAAM,CAAG,eAAe,CAAG,YAAY,CAClC,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,CACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAAkD,WAAW,CAAGa,KAAA,EAAiC,IAAhC,CAAE3D,MAAM,CAAE4C,OAAO,CAAEC,MAAO,CAAC,CAAAc,KAAA,CAC9C,KAAM,CAACX,QAAQ,CAAEC,WAAW,CAAC,CAAGxI,QAAQ,CAAC,CACvC6G,KAAK,CAAE,CAAAtB,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEsB,KAAK,GAAI,EAAE,CAC1Be,WAAW,CAAE,CAAArC,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEqC,WAAW,GAAI,EAAE,CACtCG,YAAY,CAAE,CAAAxC,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEwC,YAAY,GAAI,MAAM,CAC5CC,QAAQ,CAAE,CAAAzC,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEyC,QAAQ,GAAI,CAAC,CAC/BmB,OAAO,CAAE,CAAA5D,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAE4D,OAAO,GAAI,CAAC,CAC/B,CAAC,CAAC,CAEF,KAAM,CAAAV,YAAY,CAAIC,CAAC,EAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBP,MAAM,CAACG,QAAQ,CAAC,CAClB,CAAC,CAED,KAAM,CAAAa,mBAAmB,CAAGA,CAAA,GAAM,CAChC,OAAQb,QAAQ,CAACR,YAAY,EAC3B,IAAK,OAAO,CACV,mBAAO7G,IAAA,CAACmI,WAAW,EAACd,QAAQ,CAAEA,QAAS,CAACC,WAAW,CAAEA,WAAY,CAAE,CAAC,CACtE,IAAK,MAAM,CACT,mBAAOtH,IAAA,CAACoI,UAAU,EAACf,QAAQ,CAAEA,QAAS,CAACC,WAAW,CAAEA,WAAY,CAAE,CAAC,CACrE,IAAK,KAAK,CACR,mBAAOtH,IAAA,CAACqI,SAAS,EAAChB,QAAQ,CAAEA,QAAS,CAACC,WAAW,CAAEA,WAAY,CAAE,CAAC,CACpE,IAAK,MAAM,CACT,mBAAOtH,IAAA,CAACsI,UAAU,EAACjB,QAAQ,CAAEA,QAAS,CAACC,WAAW,CAAEA,WAAY,CAAE,CAAC,CACrE,QACE,MAAO,KAAI,CACf,CACF,CAAC,CAED,mBACEtH,IAAA,QAAKwF,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7FzF,IAAA,QAAKwF,SAAS,CAAC,mEAAmE,CAAAC,QAAA,cAChFvF,KAAA,QAAKsF,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBvF,KAAA,QAAKsF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDzF,IAAA,OAAIwF,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAEpB,MAAM,CAAG,aAAa,CAAG,gBAAgB,CAAK,CAAC,cACnFrE,IAAA,WAAQ0F,OAAO,CAAEuB,OAAQ,CAACzB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cACrEzF,IAAA,CAACF,SAAS,EAAC0F,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,EACN,CAAC,cAENtF,KAAA,SAAMwH,QAAQ,CAAEH,YAAa,CAAC/B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACjDvF,KAAA,QAAKsF,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCvF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,gBAAc,CAAO,CAAC,cACtFzF,IAAA,UACE+C,IAAI,CAAC,MAAM,CACX4E,KAAK,CAAEN,QAAQ,CAAC1B,KAAM,CACtBiC,QAAQ,CAAGJ,CAAC,EAAKF,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IAAM4D,QAAQ,MAAE1B,KAAK,CAAE6B,CAAC,CAACK,MAAM,CAACF,KAAK,EAAE,CAAE,CACrEnC,SAAS,CAAC,qFAAqF,CAC/FsC,QAAQ,MACRf,WAAW,CAAC,iCAAiC,CAC7C,cAAY,oBAAoB,CACjC,CAAC,EACC,CAAC,cAEN7G,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,oBAAkB,CAAO,CAAC,cAC1FzF,IAAA,UACE+C,IAAI,CAAC,QAAQ,CACb4E,KAAK,CAAEN,QAAQ,CAACP,QAAS,CACzBc,QAAQ,CAAGJ,CAAC,EAAKF,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IAAM4D,QAAQ,MAAEP,QAAQ,CAAEyB,QAAQ,CAACf,CAAC,CAACK,MAAM,CAACF,KAAK,CAAC,EAAI,CAAC,EAAE,CAAE,CACvFnC,SAAS,CAAC,qFAAqF,CAC/FgD,GAAG,CAAC,GAAG,CACPzB,WAAW,CAAC,UAAU,CACvB,CAAC,EACC,CAAC,EACH,CAAC,cAEN7G,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,aAAW,CAAO,CAAC,cACnFzF,IAAA,aACE2H,KAAK,CAAEN,QAAQ,CAACX,WAAY,CAC5BkB,QAAQ,CAAGJ,CAAC,EAAKF,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IAAM4D,QAAQ,MAAEX,WAAW,CAAEc,CAAC,CAACK,MAAM,CAACF,KAAK,EAAE,CAAE,CAC3EnC,SAAS,CAAC,qFAAqF,CAC/FuC,IAAI,CAAC,GAAG,CACRhB,WAAW,CAAC,iCAAiC,CAC9C,CAAC,EACC,CAAC,cAEN7G,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,gBAAc,CAAO,CAAC,cACtFzF,IAAA,QAAKwF,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACpC,CACC,CAAEkC,KAAK,CAAE,OAAO,CAAEc,IAAI,CAAEnJ,QAAQ,CAAEoJ,KAAK,CAAE,OAAQ,CAAC,CAClD,CAAEf,KAAK,CAAE,MAAM,CAAEc,IAAI,CAAElJ,gBAAgB,CAAEmJ,KAAK,CAAE,MAAO,CAAC,CACxD,CAAEf,KAAK,CAAE,KAAK,CAAEc,IAAI,CAAElJ,gBAAgB,CAAEmJ,KAAK,CAAE,KAAM,CAAC,CACtD,CAAEf,KAAK,CAAE,MAAM,CAAEc,IAAI,CAAEjJ,sBAAsB,CAAEkJ,KAAK,CAAE,MAAO,CAAC,CAC/D,CAAC1G,GAAG,CAAC2G,KAAA,MAAC,CAAEhB,KAAK,CAAEc,IAAI,CAAEG,IAAI,CAAEF,KAAM,CAAC,CAAAC,KAAA,oBACjCzI,KAAA,WAEE6C,IAAI,CAAC,QAAQ,CACb2C,OAAO,CAAEA,CAAA,GAAM4B,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IAAM4D,QAAQ,MAAER,YAAY,CAAEc,KAAK,CAAEM,OAAO,CAAE,CAAC,CAAC,EAAE,CAAE,CAC9EzC,SAAS,wFAAA5D,MAAA,CACPyF,QAAQ,CAACR,YAAY,GAAKc,KAAK,CAC3B,0CAA0C,CAC1C,uCAAuC,CAC1C,CACH,8BAAA/F,MAAA,CAA6B+F,KAAK,CAAG,CAAAlC,QAAA,eAErCzF,IAAA,CAAC4I,IAAI,EAACpD,SAAS,CAAC,cAAc,CAAE,CAAC,cACjCxF,IAAA,SAAMwF,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAEiD,KAAK,CAAO,CAAC,GAX/Cf,KAYC,CAAC,EACV,CAAC,CACC,CAAC,EACH,CAAC,cAGN3H,IAAA,QAAKwF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3ByC,mBAAmB,CAAC,CAAC,CACnB,CAAC,cAENhI,KAAA,QAAKsF,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eACvDzF,IAAA,WACE+C,IAAI,CAAC,QAAQ,CACb2C,OAAO,CAAEuB,OAAQ,CACjBzB,SAAS,CAAC,4EAA4E,CAAAC,QAAA,CACvF,QAED,CAAQ,CAAC,cACTzF,IAAA,WACE+C,IAAI,CAAC,QAAQ,CACbyC,SAAS,CAAC,+DAA+D,CACzE,cAAY,oBAAoB,CAAAC,QAAA,CAE/BpB,MAAM,CAAG,eAAe,CAAG,YAAY,CAClC,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,CACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAA8D,WAAW,CAAGU,KAAA,EAA+B,KAAAC,iBAAA,CAAAC,kBAAA,CAAAC,kBAAA,IAA9B,CAAE3B,QAAQ,CAAEC,WAAY,CAAC,CAAAuB,KAAA,CAC5C,KAAM,CAACI,WAAW,CAAEC,cAAc,CAAC,CAAGpK,QAAQ,CAAC,CAAAgK,iBAAA,CAAAzB,QAAQ,CAACY,OAAO,UAAAa,iBAAA,WAAhBA,iBAAA,CAAkBK,QAAQ,CAAG,MAAM,CAAG,KAAK,CAAC,CAE3F,mBACEjJ,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBzF,IAAA,OAAIwF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,cAEpEvF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,cAAY,CAAO,CAAC,cACpFvF,KAAA,QAAKsF,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BvF,KAAA,UAAOsF,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAClCzF,IAAA,UACE+C,IAAI,CAAC,OAAO,CACZ4E,KAAK,CAAC,KAAK,CACXyB,OAAO,CAAEH,WAAW,GAAK,KAAM,CAC/BrB,QAAQ,CAAGJ,CAAC,EAAK0B,cAAc,CAAC1B,CAAC,CAACK,MAAM,CAACF,KAAK,CAAE,CAChDnC,SAAS,CAAC,MAAM,CACjB,CAAC,cACFxF,IAAA,SAAAyF,QAAA,CAAM,mBAAiB,CAAM,CAAC,EACzB,CAAC,cACRvF,KAAA,UAAOsF,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAClCzF,IAAA,UACE+C,IAAI,CAAC,OAAO,CACZ4E,KAAK,CAAC,MAAM,CACZyB,OAAO,CAAEH,WAAW,GAAK,MAAO,CAChCrB,QAAQ,CAAGJ,CAAC,EAAK0B,cAAc,CAAC1B,CAAC,CAACK,MAAM,CAACF,KAAK,CAAE,CAChDnC,SAAS,CAAC,MAAM,CACjB,CAAC,cACFxF,IAAA,SAAAyF,QAAA,CAAM,aAAW,CAAM,CAAC,EACnB,CAAC,EACL,CAAC,EACH,CAAC,CAELwD,WAAW,GAAK,KAAK,cACpB/I,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,WAAS,CAAO,CAAC,cACjFzF,IAAA,UACE+C,IAAI,CAAC,KAAK,CACV4E,KAAK,CAAE,EAAAoB,kBAAA,CAAA1B,QAAQ,CAACY,OAAO,UAAAc,kBAAA,iBAAhBA,kBAAA,CAAkBM,GAAG,GAAI,EAAG,CACnCzB,QAAQ,CAAGJ,CAAC,EAAKF,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IACvB4D,QAAQ,MACXY,OAAO,CAAAxE,aAAA,CAAAA,aAAA,IAAO4D,QAAQ,CAACY,OAAO,MAAEoB,GAAG,CAAE7B,CAAC,CAACK,MAAM,CAACF,KAAK,EAAE,EACtD,CAAE,CACHnC,SAAS,CAAC,qFAAqF,CAC/FuB,WAAW,CAAC,mCAAmC,CAChD,CAAC,cACF/G,IAAA,MAAGwF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,wCAE1C,CAAG,CAAC,EACD,CAAC,cAENvF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,gBAAc,CAAO,CAAC,cACtFzF,IAAA,UACE+C,IAAI,CAAC,KAAK,CACV4E,KAAK,CAAE,EAAAqB,kBAAA,CAAA3B,QAAQ,CAACY,OAAO,UAAAe,kBAAA,iBAAhBA,kBAAA,CAAkBG,QAAQ,GAAI,EAAG,CACxCvB,QAAQ,CAAGJ,CAAC,EAAKF,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IACvB4D,QAAQ,MACXY,OAAO,CAAAxE,aAAA,CAAAA,aAAA,IAAO4D,QAAQ,CAACY,OAAO,MAAEkB,QAAQ,CAAE3B,CAAC,CAACK,MAAM,CAACF,KAAK,EAAE,EAC3D,CAAE,CACHnC,SAAS,CAAC,qFAAqF,CAC/FuB,WAAW,CAAC,+BAA+B,CAC5C,CAAC,cACF/G,IAAA,MAAGwF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,+CAE1C,CAAG,CAAC,EACD,CACN,EACE,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAA2C,UAAU,CAAGkB,KAAA,EAA+B,KAAAC,kBAAA,IAA9B,CAAElC,QAAQ,CAAEC,WAAY,CAAC,CAAAgC,KAAA,CAC3C,mBACEpJ,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBzF,IAAA,OAAIwF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cAC7DvF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,gBAAc,CAAO,CAAC,cACtFzF,IAAA,aACE2H,KAAK,CAAE,EAAA4B,kBAAA,CAAAlC,QAAQ,CAACY,OAAO,UAAAsB,kBAAA,iBAAhBA,kBAAA,CAAkBC,IAAI,GAAI,EAAG,CACpC5B,QAAQ,CAAGJ,CAAC,EAAKF,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IACvB4D,QAAQ,MACXY,OAAO,CAAAxE,aAAA,CAAAA,aAAA,IAAO4D,QAAQ,CAACY,OAAO,MAAEuB,IAAI,CAAEhC,CAAC,CAACK,MAAM,CAACF,KAAK,EAAE,EACvD,CAAE,CACHnC,SAAS,CAAC,+FAA+F,CACzGuC,IAAI,CAAC,IAAI,CACThB,WAAW,CAAC,kEAAkE,CAC9E,cAAY,oBAAoB,CACjC,CAAC,cACF/G,IAAA,MAAGwF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,+EAE1C,CAAG,CAAC,EACD,CAAC,EACH,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAA4C,SAAS,CAAGoB,KAAA,EAA+B,KAAAC,kBAAA,IAA9B,CAAErC,QAAQ,CAAEC,WAAY,CAAC,CAAAmC,KAAA,CAC1C,mBACEvJ,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBzF,IAAA,OAAIwF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cAC7DvF,KAAA,QAAAuF,QAAA,eACEzF,IAAA,UAAOwF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cAC/EzF,IAAA,UACE+C,IAAI,CAAC,KAAK,CACV4E,KAAK,CAAE,EAAA+B,kBAAA,CAAArC,QAAQ,CAACY,OAAO,UAAAyB,kBAAA,iBAAhBA,kBAAA,CAAkBL,GAAG,GAAI,EAAG,CACnCzB,QAAQ,CAAGJ,CAAC,EAAKF,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IACvB4D,QAAQ,MACXY,OAAO,CAAAxE,aAAA,CAAAA,aAAA,IAAO4D,QAAQ,CAACY,OAAO,MAAEoB,GAAG,CAAE7B,CAAC,CAACK,MAAM,CAACF,KAAK,EAAE,EACtD,CAAE,CACHnC,SAAS,CAAC,qFAAqF,CAC/FuB,WAAW,CAAC,kCAAkC,CAC/C,CAAC,cACF/G,IAAA,MAAGwF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,yBAE1C,CAAG,CAAC,EACD,CAAC,EACH,CAAC,CAEV,CAAC,CAED;AACA,KAAM,CAAA6C,UAAU,CAAGqB,KAAA,EAA+B,KAAAC,kBAAA,IAA9B,CAAEvC,QAAQ,CAAEC,WAAY,CAAC,CAAAqC,KAAA,CAC3C,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGhL,QAAQ,CAAC,EAAA8K,kBAAA,CAAAvC,QAAQ,CAACY,OAAO,UAAA2B,kBAAA,iBAAhBA,kBAAA,CAAkBC,SAAS,GAAI,EAAE,CAAC,CAE7E,KAAM,CAAAE,WAAW,CAAGA,CAAA,GAAM,CACxBD,YAAY,CAAC,CAAC,GAAGD,SAAS,CAAE,CAC1BG,QAAQ,CAAE,EAAE,CACZC,OAAO,CAAE,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CACzBC,cAAc,CAAE,CAClB,CAAC,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAC,cAAc,CAAGA,CAAC9G,KAAK,CAAE+G,KAAK,CAAEzC,KAAK,GAAK,CAC9C,KAAM,CAAA0C,YAAY,CAAG,CAAC,GAAGR,SAAS,CAAC,CACnCQ,YAAY,CAAChH,KAAK,CAAC,CAAAI,aAAA,CAAAA,aAAA,IAAQ4G,YAAY,CAAChH,KAAK,CAAC,MAAE,CAAC+G,KAAK,EAAGzC,KAAK,EAAE,CAChEmC,YAAY,CAACO,YAAY,CAAC,CAC1B/C,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IACN4D,QAAQ,MACXY,OAAO,CAAAxE,aAAA,CAAAA,aAAA,IAAO4D,QAAQ,CAACY,OAAO,MAAE4B,SAAS,CAAEQ,YAAY,EAAE,EAC1D,CAAC,CACJ,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAACC,MAAM,CAAEC,MAAM,CAAE7C,KAAK,GAAK,CAC9C,KAAM,CAAA0C,YAAY,CAAG,CAAC,GAAGR,SAAS,CAAC,CACnCQ,YAAY,CAACE,MAAM,CAAC,CAACN,OAAO,CAACO,MAAM,CAAC,CAAG7C,KAAK,CAC5CmC,YAAY,CAACO,YAAY,CAAC,CAC1B/C,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IACN4D,QAAQ,MACXY,OAAO,CAAAxE,aAAA,CAAAA,aAAA,IAAO4D,QAAQ,CAACY,OAAO,MAAE4B,SAAS,CAAEQ,YAAY,EAAE,EAC1D,CAAC,CACJ,CAAC,CAED,KAAM,CAAAI,cAAc,CAAIpH,KAAK,EAAK,CAChC,KAAM,CAAAgH,YAAY,CAAGR,SAAS,CAACa,MAAM,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKvH,KAAK,CAAC,CAC5DyG,YAAY,CAACO,YAAY,CAAC,CAC1B/C,WAAW,CAAA7D,aAAA,CAAAA,aAAA,IACN4D,QAAQ,MACXY,OAAO,CAAAxE,aAAA,CAAAA,aAAA,IAAO4D,QAAQ,CAACY,OAAO,MAAE4B,SAAS,CAAEQ,YAAY,EAAE,EAC1D,CAAC,CACJ,CAAC,CAED,mBACEnK,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBvF,KAAA,QAAKsF,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDzF,IAAA,OAAIwF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC/DzF,IAAA,WACE+C,IAAI,CAAC,QAAQ,CACb2C,OAAO,CAAEqE,WAAY,CACrBvE,SAAS,CAAC,4EAA4E,CACtF,cAAY,0BAA0B,CAAAC,QAAA,CACvC,gBAED,CAAQ,CAAC,EACN,CAAC,CAELoE,SAAS,CAACpF,MAAM,GAAK,CAAC,cACrBvE,KAAA,QAAKsF,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eACjFzF,IAAA,CAACR,sBAAsB,EAACgG,SAAS,CAAC,sCAAsC,CAAE,CAAC,cAC3ExF,IAAA,MAAGwF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,0DAAsD,CAAG,CAAC,EACpF,CAAC,cAENzF,IAAA,QAAKwF,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBoE,SAAS,CAAC7H,GAAG,CAAC,CAACgI,QAAQ,CAAEO,MAAM,gBAC9BrK,KAAA,QAAkBsF,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC5DvF,KAAA,QAAKsF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDvF,KAAA,OAAIsF,SAAS,CAAC,2BAA2B,CAAAC,QAAA,EAAC,WAAS,CAAC8E,MAAM,CAAG,CAAC,EAAK,CAAC,cACpEvK,IAAA,WACE+C,IAAI,CAAC,QAAQ,CACb2C,OAAO,CAAEA,CAAA,GAAM+E,cAAc,CAACF,MAAM,CAAE,CACtC/E,SAAS,CAAC,iCAAiC,CAAAC,QAAA,cAE3CzF,IAAA,CAACP,SAAS,EAAC+F,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,EACN,CAAC,cAENtF,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBzF,IAAA,UACE+C,IAAI,CAAC,MAAM,CACX4E,KAAK,CAAEqC,QAAQ,CAACA,QAAS,CACzBpC,QAAQ,CAAGJ,CAAC,EAAK2C,cAAc,CAACI,MAAM,CAAE,UAAU,CAAE/C,CAAC,CAACK,MAAM,CAACF,KAAK,CAAE,CACpEnC,SAAS,CAAC,qFAAqF,CAC/FuB,WAAW,CAAC,qBAAqB,CACjC,+BAAAnF,MAAA,CAA8B2I,MAAM,CAAG,CACxC,CAAC,cAEFrK,KAAA,QAAKsF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBzF,IAAA,UAAOwF,SAAS,CAAC,yCAAyC,CAAAC,QAAA,CAAC,8BAA4B,CAAO,CAAC,CAC9FuE,QAAQ,CAACC,OAAO,CAACjI,GAAG,CAAC,CAAC6I,MAAM,CAAEL,MAAM,gBACnCtK,KAAA,QAAkBsF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eACvDzF,IAAA,UACE+C,IAAI,CAAC,OAAO,CACZ+H,IAAI,YAAAlJ,MAAA,CAAa2I,MAAM,CAAG,CAC1BnB,OAAO,CAAEY,QAAQ,CAACE,cAAc,GAAKM,MAAO,CAC5C5C,QAAQ,CAAEA,CAAA,GAAMuC,cAAc,CAACI,MAAM,CAAE,gBAAgB,CAAEC,MAAM,CAAE,CACjEhF,SAAS,CAAC,eAAe,CAC1B,CAAC,cACFxF,IAAA,UACE+C,IAAI,CAAC,MAAM,CACX4E,KAAK,CAAEkD,MAAO,CACdjD,QAAQ,CAAGJ,CAAC,EAAK8C,YAAY,CAACC,MAAM,CAAEC,MAAM,CAAEhD,CAAC,CAACK,MAAM,CAACF,KAAK,CAAE,CAC9DnC,SAAS,CAAC,qFAAqF,CAC/FuB,WAAW,WAAAnF,MAAA,CAAY4I,MAAM,CAAG,CAAC,CAAG,CACpC,6BAAA5I,MAAA,CAA4B2I,MAAM,MAAA3I,MAAA,CAAI4I,MAAM,CAAG,CAChD,CAAC,GAfMA,MAgBL,CACN,CAAC,EACC,CAAC,EACH,CAAC,GA5CED,MA6CL,CACN,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAApK,qBAAqB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}