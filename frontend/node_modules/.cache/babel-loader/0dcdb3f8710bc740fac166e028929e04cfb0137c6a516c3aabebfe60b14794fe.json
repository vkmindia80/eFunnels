{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{DragDropContext,Droppable,Draggable}from'react-beautiful-dnd';import{GripVertical,Trash2,Copy}from'lucide-react';import{BlockRenderer}from'./blocks';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Canvas=_ref=>{let{blocks,selectedBlockId,onSelectBlock,onReorderBlocks,onDeleteBlock,onDuplicateBlock}=_ref;const handleDragEnd=result=>{if(!result.destination)return;onReorderBlocks(result.source.index,result.destination.index);};return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 bg-gray-50 overflow-y-auto p-6\",style:{height:'calc(100vh - 200px)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-3xl mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\",children:blocks.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 mb-2\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 6h16M4 12h16m-7 6h7\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-1\",children:\"Start building your email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Click blocks from the library to add them to your email\"})]}):/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:handleDragEnd,children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"email-canvas\",children:provided=>/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},provided.droppableProps),{},{ref:provided.innerRef,className:\"space-y-2\",children:[blocks.map((block,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:block.id,index:index,children:(provided,snapshot)=>/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),{},{className:\"group relative \".concat(snapshot.isDragging?'opacity-50':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"absolute -left-12 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition flex flex-col gap-1\",children:[/*#__PURE__*/_jsx(\"button\",_objectSpread(_objectSpread({},provided.dragHandleProps),{},{className:\"p-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 cursor-move\",title:\"Drag to reorder\",children:/*#__PURE__*/_jsx(GripVertical,{size:16,className:\"text-gray-400\"})})),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDuplicateBlock(block.id),className:\"p-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50\",title:\"Duplicate\",children:/*#__PURE__*/_jsx(Copy,{size:16,className:\"text-gray-600\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDeleteBlock(block.id),className:\"p-1.5 bg-white border border-gray-200 rounded hover:bg-red-50\",title:\"Delete\",children:/*#__PURE__*/_jsx(Trash2,{size:16,className:\"text-red-600\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pl-8\",children:/*#__PURE__*/_jsx(BlockRenderer,{block:block,isSelected:selectedBlockId===block.id,onClick:()=>onSelectBlock(block.id)})})]}))},block.id)),provided.placeholder]}))})})})})});};export default Canvas;","map":{"version":3,"names":["React","DragDropContext","Droppable","Draggable","GripVertical","Trash2","Copy","BlockRenderer","jsx","_jsx","jsxs","_jsxs","Canvas","_ref","blocks","selectedBlockId","onSelectBlock","onReorderBlocks","onDeleteBlock","onDuplicateBlock","handleDragEnd","result","destination","source","index","className","style","height","children","length","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","onDragEnd","droppableId","provided","_objectSpread","droppableProps","ref","innerRef","map","block","draggableId","id","snapshot","draggableProps","concat","isDragging","dragHandleProps","title","size","onClick","isSelected","placeholder"],"sources":["/app/frontend/src/components/EmailBuilder/Canvas.js"],"sourcesContent":["import React from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { GripVertical, Trash2, Copy } from 'lucide-react';\nimport { BlockRenderer } from './blocks';\n\nconst Canvas = ({ blocks, selectedBlockId, onSelectBlock, onReorderBlocks, onDeleteBlock, onDuplicateBlock }) => {\n  const handleDragEnd = (result) => {\n    if (!result.destination) return;\n    onReorderBlocks(result.source.index, result.destination.index);\n  };\n\n  return (\n    <div className=\"flex-1 bg-gray-50 overflow-y-auto p-6\" style={{ height: 'calc(100vh - 200px)' }}>\n      <div className=\"max-w-3xl mx-auto\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\">\n          {blocks.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <div className=\"text-gray-400 mb-2\">\n                <svg className=\"mx-auto h-12 w-12\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16m-7 6h7\" />\n                </svg>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-1\">Start building your email</h3>\n              <p className=\"text-gray-500\">Click blocks from the library to add them to your email</p>\n            </div>\n          ) : (\n            <DragDropContext onDragEnd={handleDragEnd}>\n              <Droppable droppableId=\"email-canvas\">\n                {(provided) => (\n                  <div {...provided.droppableProps} ref={provided.innerRef} className=\"space-y-2\">\n                    {blocks.map((block, index) => (\n                      <Draggable key={block.id} draggableId={block.id} index={index}>\n                        {(provided, snapshot) => (\n                          <div\n                            ref={provided.innerRef}\n                            {...provided.draggableProps}\n                            className={`group relative ${\n                              snapshot.isDragging ? 'opacity-50' : ''\n                            }`}\n                          >\n                            {/* Block Actions */}\n                            <div className=\"absolute -left-12 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition flex flex-col gap-1\">\n                              <button\n                                {...provided.dragHandleProps}\n                                className=\"p-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50 cursor-move\"\n                                title=\"Drag to reorder\"\n                              >\n                                <GripVertical size={16} className=\"text-gray-400\" />\n                              </button>\n                              <button\n                                onClick={() => onDuplicateBlock(block.id)}\n                                className=\"p-1.5 bg-white border border-gray-200 rounded hover:bg-gray-50\"\n                                title=\"Duplicate\"\n                              >\n                                <Copy size={16} className=\"text-gray-600\" />\n                              </button>\n                              <button\n                                onClick={() => onDeleteBlock(block.id)}\n                                className=\"p-1.5 bg-white border border-gray-200 rounded hover:bg-red-50\"\n                                title=\"Delete\"\n                              >\n                                <Trash2 size={16} className=\"text-red-600\" />\n                              </button>\n                            </div>\n\n                            {/* Block Content */}\n                            <div className=\"pl-8\">\n                              <BlockRenderer\n                                block={block}\n                                isSelected={selectedBlockId === block.id}\n                                onClick={() => onSelectBlock(block.id)}\n                              />\n                            </div>\n                          </div>\n                        )}\n                      </Draggable>\n                    ))}\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </DragDropContext>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Canvas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}